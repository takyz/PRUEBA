!function(a,b){"use strict";"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}(this,function(a,b,c,d){"use strict";function e(a,b){return this instanceof e?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==b?this.absoluteTo(b):this):new e(a,b)}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d,e={};if(h(b))for(c=0,d=b.length;c<d;c++)e[b[c]]=!0;else e[b]=!0;for(c=0,d=a.length;c<d;c++)void 0!==e[a[c]]&&(a.splice(c,1),d--,c--);return a}function j(a,b){var c,d;if(h(b)){for(c=0,d=b.length;c<d;c++)if(!j(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;c<d;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function k(a,b){if(!h(a)||!h(b))return!1;if(a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function l(a){return escape(a)}function m(a){return encodeURIComponent(a).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}var n=d&&d.URI;e.version="1.13.2";var o=e.prototype,p=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();if("input"!==b||"image"===a.type)return e.domAttributes[b]}},e.encode=m,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=m,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return void 0===b&&(b=e.escapeQuerySpace),b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="",void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(b){return a}},e.recodePath=function(a){for(var b=(a+"").split("/"),c=0,d=b.length;c<d;c++)b[c]=e.encodePathSegment(e.decode(b[c]));return b.join("/")},e.decodePath=function(a){for(var b=(a+"").split("/"),c=0,d=b.length;c<d;c++)b[c]=e.decodePathSegment(b[c]);return b.join("/")};var q,r={encode:"encode",decode:"decode"},s=function(a,b){return function(c){return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}};for(q in r)e[q+"PathSegment"]=s("pathname",r[q]);e.encodeReserved=s("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),c>-1&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),c>-1&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),c>-1&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"file"===b.protocol?a=a.substring(c+3):"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0))),b.path=a,b},e.parseHost=function(a,b){var c,d,e=a.indexOf("/");return e===-1&&(e=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null),b.hostname&&"/"!==a.substring(e).charAt(0)&&(e++,a="/"+a),a.substring(e)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c,d=a.indexOf("/"),f=d>-1?a.lastIndexOf("@",d):a.indexOf("@");return f>-1&&(d===-1||f<d)?(c=a.substring(0,f).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!a)return{};for(var c,d,f,g={},h=a.split("&"),i=h.length,j=0;j<i;j++)c=h[j].split("="),d=e.decodeQuery(c.shift(),b),f=c.length?e.decodeQuery(c.join("="),b):null,g[d]?("string"==typeof g[d]&&(g[d]=[g[d]]),g[d].push(f)):g[d]=f;return g},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(b+=e.ip6_expression.test(a.hostname)?"["+a.hostname+"]":a.hostname,a.port&&(b+=":"+a.port),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(p.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;g<i;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),b!==!0&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)p.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===a[b])return void(a[b]=c);"string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=a[b].concat(c)}},e.removeQuery=function(a,b,c){var d,f,g;if(h(b))for(d=0,f=b.length;d<f;d++)a[b[d]]=void 0;else if("object"==typeof b)for(g in b)p.call(b,g)&&e.removeQuery(a,g,b[g]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==c?a[b]===c?a[b]=void 0:h(a[b])&&(a[b]=i(a[b],c)):a[b]=void 0}},e.hasQuery=function(a,b,c,d){if("object"==typeof b){for(var f in b)if(p.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}if("string"!=typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(g(c)){case"Undefined":return b in a;case"Boolean":var i=Boolean(h(a[b])?a[b].length:a[b]);return c===i;case"Function":return!!c(a[b],b,a);case"Array":if(!h(a[b]))return!1;var l=d?j:k;return l(a[b],c);case"RegExp":return h(a[b])?!!d&&j(a[b],c):Boolean(a[b]&&a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?!!d&&j(a[b],c):a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;c<d;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return c<1?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":("/"===a.charAt(c)&&"/"===b.charAt(c)||(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,h=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var i=d.exec(a);if(!i)break;var j=i.index;if(c.ignoreHtml){var k=a.slice(Math.max(j-3,0),j);if(k&&h.test(k))continue}var l=j+a.slice(j).search(f),m=a.slice(j,l).replace(g,"");if(!c.ignore||!c.ignore.test(m)){l=j+m.length;var n=b(m,j,l,a);a=a.slice(0,j)+n+a.slice(l),d.lastIndex=j+n.length}}return d.lastIndex=0,a},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}},e.noConflict=function(a){if(a){var b={URI:this.noConflict()};return d.URITemplate&&"function"==typeof d.URITemplate.noConflict&&(b.URITemplate=d.URITemplate.noConflict()),d.IPv6&&"function"==typeof d.IPv6.noConflict&&(b.IPv6=d.IPv6.noConflict()),d.SecondLevelDomains&&"function"==typeof d.SecondLevelDomains.noConflict&&(b.SecondLevelDomains=d.SecondLevelDomains.noConflict()),b}return d.URI===this&&(d.URI=n),this},o.build=function(a){return a===!0?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},o.clone=function(){return new e(this)},o.valueOf=o.toString=function(){return this.build(!1)._string},r={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},s=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}};for(q in r)o[q]=s(r[q]);r={query:"?",fragment:"#"},s=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(q in r)o[q]=s(q,r[q]);r={search:["?","query"],hash:["#","fragment"]},s=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(q in r)o[q]=s(r[q][1],r[q][0]);o.pathname=function(a,b){if(void 0===a||a===!0){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return this._parts.path=a?e.recodePath(a):"/",this.build(!b),this},o.path=o.pathname,o.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName){var g=e.getDomAttribute(a);a=a[g]||"",f=!1}if(!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a)this._parts=e.parse(a,this._parts);else{if(!d&&!f)throw new TypeError("invalid input");var h=d?a._parts:a;for(c in h)p.call(this._parts,c)&&(this._parts[c]=h[c])}return this.build(!b),this},o.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,g=!b,h=g&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var t=o.protocol,u=o.port,v=o.hostname;o.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return t.call(this,a,b)},o.scheme=o.protocol,o.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return u.call(this,a,b)},o.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c),a=c.hostname}return v.call(this,a,b)},o.host=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)},o.authority=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)},o.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},o.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},o.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}var d=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,d),h=new RegExp("^"+f(g));return a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(h,a),this.build(!b),this},o.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&c.length<2)return this._parts.hostname;var d=this._parts.hostname.length-this.tld(b).length-1;return d=this._parts.hostname.lastIndexOf(".",d-1)+1,this._parts.hostname.substring(d)||""}if(!a)throw new TypeError("cannot set domain empty");if(e.ensureValidHostname(a),!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var g=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},o.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),e=this._parts.hostname.substring(d+1);return b!==!0&&c&&c.list[e.toLowerCase()]?c.get(this._parts.hostname)||e:e}var g;if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},o.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,d=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(d):d}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+f(h));return this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a),this.build(!b),this},o.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),d=this._parts.path.substring(c+1);return a?e.decodePathSegment(d):d}var g=!1;"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(g=!0);var h=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(h,a),g?this.normalizePath(b):this.build(!b),this},o.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var c,d,g=this.filename(),h=g.lastIndexOf(".");return h===-1?"":(c=g.substring(h+1),d=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(d):d)}"."===a.charAt(0)&&(a=a.substring(1));var i,j=this.suffix();if(j)i=a?new RegExp(f(j)+"$"):new RegExp(f("."+j)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return i&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a)),this.build(!b),this},o.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),g=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error('Bad segment "'+a+'", must be 0-based integer');if(f&&g.shift(),a<0&&(a=Math.max(g.length+a,0)),void 0===b)return void 0===a?g:g[a];if(null===a||void 0===g[a])if(h(b)){g=[];for(var i=0,j=b.length;i<j;i++)(b[i].length||g.length&&g[g.length-1].length)&&(g.length&&!g[g.length-1].length&&g.pop(),g.push(b[i]))}else(b||"string"==typeof b)&&(""===g[g.length-1]?g[g.length-1]=b:g.push(b));else b||"string"==typeof b&&b.length?g[a]=b:g.splice(a,1);return f&&g.unshift(""),this.path(g.join(d),c)},o.segmentCoded=function(a,b,c){var d,f,g;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(d=this.segment(a,b,c),h(d))for(f=0,g=d.length;f<g;f++)d[f]=e.decode(d[f]);else d=void 0!==d?e.decode(d):void 0;return d}if(h(b))for(f=0,g=b.length;f<g;f++)b[f]=e.decode(b[f]);else b="string"==typeof b?e.encode(b):b;return this.segment(a,b,c)};var w=o.query;return o.query=function(a,b){if(a===!0)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):w.call(this,a,b)},o.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof a)for(var f in a)p.call(a,f)&&(d[f]=a[f]);else{if("string"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");d[a]=void 0!==b?b:null}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},o.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},o.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},o.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},o.setSearch=o.setQuery,o.addSearch=o.addQuery,o.removeSearch=o.removeQuery,o.hasSearch=o.hasQuery,o.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},o.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},o.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},o.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},o.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var b,c,d,f=this._parts.path,g="";for("/"!==f.charAt(0)&&(b=!0,f="/"+f),f=f.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),b&&(g=f.substring(1).match(/^(\.\.\/)+/)||"",g&&(g=g[0]));;){if(c=f.indexOf("/.."),c===-1)break;0!==c?(d=f.substring(0,c).lastIndexOf("/"),d===-1&&(d=c),f=f.substring(0,d)+f.substring(c+3)):f=f.substring(3)}return b&&this.is("relative")&&(f=g+f.substring(1)),f=e.recodePath(f),this._parts.path=f,this.build(!a),this},o.normalizePathname=o.normalizePath,o.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},o.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},o.normalizeSearch=o.normalizeQuery,o.normalizeHash=o.normalizeFragment,o.iso8859=function(){var a=e.encode,b=e.decode;return e.encode=escape,e.decode=decodeURIComponent,this.normalize(),e.encode=a,e.decode=b,this},o.unicode=function(){var a=e.encode,b=e.decode;return e.encode=m,e.decode=unescape,this.normalize(),e.encode=a,e.decode=b,this},o.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;f<h;f++){var i=(g[f]||"").split("=");d+="&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},o.absoluteTo=function(a){var b,c,d,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),f._parts.protocol||(f._parts.protocol=a._parts.protocol),this._parts.hostname)return f;for(c=0;d=g[c];c++)f._parts[d]=a._parts[d];return f._parts.path?".."===f._parts.path.substring(-2)&&(f._parts.path+="/"):(f._parts.path=a._parts.path,f._parts.query||(f._parts.query=a._parts.query)),"/"!==f.path().charAt(0)&&(b=a.directory(),f._parts.path=(b?b+"/":"")+f._parts.path,f.normalizePath()),f.build(),f},o.relativeTo=function(a){var b,c,d,f,g,h=this.clone().normalize();if(h._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=h._parts,c=a._parts,f=h.path(),g=a.path(),"/"!==f.charAt(0))throw new Error("URI is already relative");if("/"!==g.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password)return h.build();if(null!==b.protocol||null!==b.username||null!==b.password)return h.build();if(b.hostname!==c.hostname||b.port!==c.port)return h.build();if(b.hostname=null,b.port=null,f===g)return b.path="",h.build();if(d=e.commonPath(h.path(),a.path()),!d)return h.build();var i=c.path.substring(d.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return b.path=i+b.path.substring(d.length),h.build()},o.equals=function(a){var b,c,d,f=this.clone(),g=new e(a),i={},j={},l={};if(f.normalize(),g.normalize(),f.toString()===g.toString())return!0;if(b=f.query(),c=g.query(),f.query(""),g.query(""),f.toString()!==g.toString())return!1;if(b.length!==c.length)return!1;i=e.parseQuery(b,this._parts.escapeQuerySpace),j=e.parseQuery(c,this._parts.escapeQuerySpace);for(d in i)if(p.call(i,d)){if(h(i[d])){if(!k(i[d],j[d]))return!1}else if(i[d]!==j[d])return!1;l[d]=!0}for(d in j)if(p.call(j,d)&&!l[d])return!1;return!0},o.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},o.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e}),!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(a){function b(c,d,e){"use strict";var f=new Function("return "+b.tpl.replace(/\$\$\$/gm,c))();return f.prototype=d(a),e||b.validate(f,c),b.installMandatoryFunctions(f,c),b.registerAsJqueryPlugin(f,c),b.save(f,c),f}if(!a)throw"jQuery is not defined";b.validate=function(a,b){var c=["triggerChangeEvent","destroy","whenDestroy","getParamKey","getModelKey","UI"].filter(function(b){return a.prototype.hasOwnProperty(b)});if(c.length)throw new Error("Plugin: "+b+' must NOT implement: "'+c.join(", ")+'"');var d=["getValue","setValue","init","getDefaults","bindEvents","markup"].filter(function(b){return"function"!=typeof a.prototype[b]});if(d.length)throw new Error("Plugin: "+b+' must implement: "'+d.join(", ")+'"')},b.registerAsJqueryPlugin=function(b,c){window.jQuery&&window.jQuery.fn&&(window.jQuery.fn[c]=function(d){if("string"==typeof d){var e=a(this).data("plugin_"+c);if(e&&"function"==typeof e[d])return e[d].apply(e,Array.prototype.slice.call(arguments,1))}return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})})},b.installMandatoryFunctions=function(a,b){a.name||(a.name=b),a.prototype.constructor=a,a.unique_id_counter=0,a.prototype.UI=function(){return window.Wix.UI||window.UI},a.prototype.triggerChangeEvent=function(a){this.$el.trigger(b+".change",a)},a.prototype.getParamKey=function(){return this.$el.attr("wix-param")||this.$el.attr("data-wix-param")},a.prototype.getModelKey=function(){return this.$el.attr("wix-model")||this.$el.attr("data-wix-model")},a.prototype.destroy=function(){this.$el.off(),this.$el.find("*").off(),this.destroyHandlers.forEach(function(a){try{a.call(this)}catch(a){setTimeout(function(){throw b+":"+a.message},0)}},this),this.$el.remove()},a.prototype.whenDestroy=function(a){if("function"!=typeof a)throw new Error("Destroy handler must be a function");this.destroyHandlers.push(a)}},b.save=function(a,c){b.store=b.store||{},b.store[c]=a},b.tpl="function $$$(el, options) { 'use strict';if (!(this instanceof $$$)) {throw new Error('Plugin: $$$ must called with the \"new\" keyword');}this.$el = window.jQuery(el);this.options = window.jQuery.extend({}, this.getDefaults(), options);this.pluginName = '$$$';el.$uiLibPluginName = '$$$';this.destroyHandlers = [];this.GUID = '$$$_' + ($$$.unique_id_counter++);this.init();return this;}",a.fn.definePlugin=b,a.fn.getCtrl=function(){return this[0]?this.data("plugin_"+this[0].$uiLibPluginName):null}}(jQuery);var createColorBox=function(){function a(a){function b(a){f.className="simple-color-node",f=a,f.className+=" color-node-selected"}function c(a,b){var c=document.createElement("div");return c.className=b,c.style.background=a.value,c.$dataColor=a,c}function d(){return f.$dataColor}function e(a,b){for(var c,d=[],e=0;e<h.children.length;e++)if(c=h.children[e],-1!==c.className.indexOf("simple-color-node")&&a(c)){if(b)return c;d.push(c)}return b?null:d}var f={},g={elm:j,hide:function(){j.style.display="none"},show:function(){j.style.display="block"},getColor:d,setColor:function(a){var c=e(function(b){var c=b.$dataColor.reference;return c&&(c===a.reference||c===a||a===b.$dataColor.value)},!0);g.removeSelection(),c&&b(c)},removeSelection:function(){f.className="simple-color-node",f={}}},h=document.createElement("div");h.className="colorpicker-wrapper";var i=document.createElement("div");i.className="change-picker-label",i.innerHTML="All colors";var j=document.createElement("div");j.className="colorpicker simple-color-palete",j.style.width=a.width||"auto",j.style.height=a.height||"auto";for(var k=-1,l=0,m=0;m<a.paleteColors.length;m++)l=m%5,l=5*l,k+=0===l?1:0,h.appendChild(c(a.paleteColors[l+k],"simple-color-node"));return a.primColors.forEach(function(a){h.appendChild(c(a,"simple-color-node prim-color"))}),h.appendChild(i),j.appendChild(h),a.parent.appendChild(j),j.onclick=function(c){c.target!==j&&-1!==c.target.className.indexOf("simple-color-node")&&-1===c.target.className.indexOf("color-node-selected")&&(b(c.target),a.onchange&&a.onchange.call(null,d()))},a.selected&&g.setColor(a.selected),i.onclick=function(){a.onchangepicker&&a.onchangepicker.call()},g}function b(b){function d(){e();var d=f(b.color);return p.colorPicker=c(p.colorBoxPicker,d?d.value:b.color,i),p.colorPicker.on("oncolorpickerchange",function(a){p.colorPalete.removeSelection(),m(a,!1),b.onchange&&b.onchange(a)}),p.colorPalete=a({width:"182px",parent:p.popup.content,selected:d,onchangepicker:function(){j()},onchange:function(a){p.colorPicker.setColor(a.value),m(a.value,a),b.onchange&&b.onchange(a)},paleteColors:b.paleteColors||[],primColors:b.primColors||[]}),i(),d?m(d.value,d):m(b.color,!1),k(),g(),q}function e(){p.colorBox=b.element||document.createElement("div"),p.popup=$("<div>").Popup({appendTo:p.colorBox,title:"ColorPicker",buttonSet:"okCancel",height:"auto",width:"auto",fixed:!0,maxPopupWidth:265,onclose:function(){q.hidePickers()},oncancel:function(){(q.getColorObject()||q.getColor()!==p.openedColor)&&(q.setColor(p.openedColor),b.onchange&&b.onchange(p.openedColor)),q.hidePickers()},onopen:function(){p.colorBox.appendChild(this.arrow)},onposition:function(){}}).getCtrl(),p.popup.setRelativeElement(p.colorBox),p.colorBoxPicker=document.createElement("div"),p.colorBoxInner=document.createElement("div"),p.colorBoxInnerArrow=document.createElement("div"),p.colorBoxPicker.className="colorpicker",
p.colorBox.className="uilib-color-box",p.colorBoxInner.className="color-box-inner",p.colorBoxInnerArrow.className="color-box-inner-arrow",p.popup.content.appendChild(p.colorBoxPicker),p.colorBox.appendChild(p.colorBoxInner),p.colorBox.appendChild(p.colorBoxInnerArrow),b.parent&&b.parent.appendChild(p.colorBox)}function f(a){if(!a)return!1;if(a.reference)return a;for(var c=0;c<b.primColors.length;c++)if(b.primColors[c].reference===a)return b.primColors[c];for(var c=0;c<b.paleteColors.length;c++)if(b.paleteColors[c].reference===a)return b.paleteColors[c];return!1}function g(){p.colorBox.onclick=function(a){return a.stopPropagation&&a.stopPropagation(),a.prevetDefault&&a.prevetDefault(),(a.target===p.colorBox||a.target===p.colorBoxInner||a.target===p.colorBoxInnerArrow)&&(p.popup.isOpen()||l()),!1}}function h(){p.openedColor=b.isParamConected?q.getColorObject()||q.getColor():q.getColor()}function i(){p.popup.setTitle("Site Colors"),p.colorPicker.hide(),p.colorPalete.show()}function j(){p.popup.setTitle("All Colors"),p.colorPalete.hide(),p.colorPicker.show()}function k(){o(),p.popup.close()}function l(){h(),n(),p.popup.open()}function m(a,c){-1!==a.indexOf("rgba")&&(a=a.replace(/,\s*\d+\.?\d*\s*\)/,")").replace("rgba","rgb")),p.colorBoxInner.style.background=a,b.isParamConected&&(c?i():j()),p.colorObject=c}function n(){n.onselectstart=document.onselectstart||null,n.onmousedown=document.onmousedown||null,document.onmousedown=document.onselectstart=function(a){return!((!a.target.tagName||"textarea"!==a.target.tagName.toLowerCase()&&"input"!==a.target.tagName.toLowerCase())&&!a.ctrlKey)}}function o(){document.onselectstart=n.onselectstart||null,document.onmousedown=n.onmousedown||null,n.onselectstart=null,n.onmousedown=null}var p={},q={showSimplePicker:i,showAdvancePicker:j,hidePickers:k,showPickers:l,setColor:function(a){var b=f(a);b?(p.colorPalete.setColor(b.reference),p.colorPicker.setColor(b.value),m(b.value,b)):(p.colorPalete.setColor(a),p.colorPicker.setColor(a),m(a,!1))},getColor:function(){return p.colorPicker.getColor()},getColorObject:function(){return p.colorObject}};return d()}var c=function(){"use strict";function a(a,b,c){return"#"+((1<<24)+(a<<16)+(b<<8)+c).toString(16).slice(1)}function b(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(a),c=parseInt(b[4],16);return c=isNaN(c)?1:c/255,b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),c]:null}function c(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g=Math.max(a,b,c),h=Math.min(a,b,c),i=(g+h)/2;if(g===h)e=f=0;else{var j=g-h;switch(f=i>.5?j/(2-g-h):j/(g+h),g){case a:e=(b-c)/j+(c>b?6:0);break;case b:e=(c-a)/j+2;break;case c:e=(a-b)/j+4}e/=6}return d=isNaN(+d)?1:+d,[e,f,i,d]}function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}function e(a,b,c,e){var f,g,h;if(0===b)f=g=h=c;else{var i=.5>c?c*(1+b):c+b-c*b,j=2*c-i;f=d(j,i,a+1/3),g=d(j,i,a),h=d(j,i,a-1/3)}return e=void 0===e?1:e,[255*f,255*g,255*h,e]}function f(a){var b=a.match(/\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?([^)]+)?\s*/);return b?b.slice(1,5):void 0}function g(a){var b=a.match(/hsla?\(([^,]+)\s*,\s*([^%]+)%\s*,\s*([^%]+)%\s*,?\s*([^)]+)?\s*/);return b?(b=b.slice(1,5),b[0]=b[0]/360,b[1]=b[1]/100,b[2]=b[2]/100,b[3]=isNaN(+b[3])?1:+b[3],b):[0,0,0,0]}function h(b){var c=i(b),d=e.apply(null,c);d[0]=d[0]<<0,d[1]=d[1]<<0,d[2]=d[2]<<0;var f=a.apply(null,d);return f}function i(a){var d;if("l"===a.charAt(2))return g(a);var e=f(a);if(e)d=c.apply(null,e);else{if((3===a.length||6===a.length&&"#"!==a.charAt(0))&&(a="#"+a),4===a.length){var h=a.split("#").pop();a+=h}d=c.apply(null,b(a))}return d}function j(a){var b='<div class="colorpicker-wrapper"><div class="colorpicker-pickers"><div class="colorpicker-lightsat-palete"></div><div class="colorpicker-color-palete"></div><div class="colorpicker-opacity-palete colorpicker-opacity-back" style="display:none"></div></div><div class="colorpicker-picker-inputs"><label>H</label><label class="deg-label">&deg;</label><input type="text" class="colorpicker-hue"/><label>S</label><label>%</label><input type="text" class="colorpicker-saturation"/><label>L</label><label>%</label><input type="text" class="colorpicker-lightness"/><label style="display:none">Opacity</label><input style="display:none" type="text" class="colorpicker-opacity"/></div><div class="colorpicker-picker-inputs-extra"><label>#</label><input type="text" class="colorpicker-color"/><div class="change-picker-label">Site colors</div></div></div><div class="colorpicker-picker-selected"><div class="colorpicker-priveuse colorpicker-opacity-back"></div><div class="colorpicker-current colorpicker-opacity-back"></div></div>';-1===a.className.indexOf("uilib-colorpicker")&&(0===a.className.length?a.className="uilib-colorpicker":a.className+=" uilib-colorpicker"),a.innerHTML=b}function k(a,b){return b=b||{},b.call=function(c){var d=Array.prototype.slice.call(arguments,1);b[c].forEach(function(b){b.apply(a,d)})},b.on=function(a,c){return b[a].push(c),function(){var d=b[a].indexOf(c);~d&&b[a].splice(d,1)}},b}function l(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:c,left:b}}function m(a,b){var c=l(b),d=(a.clientX-c.left)/(b.clientWidth-1),e=(a.clientY-c.top)/(b.clientHeight-1);return{x:Math.min(Math.max(d,0),1),y:Math.min(Math.max(e,0),1)}}function n(a,b,c){var d=document.createElement("div");return d.style.cssText="width:"+a+";height:"+b+";",c&&c.appendChild(d),d}var o=!0,p=function(){var a={open:'<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" version="1.0" width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink"><defs>',close:'</linearGradient></defs><rect width="100%" height="100%" style="fill:url(#g);" /></svg>',dirs:{left:'x1="0%" y1="0%" x2="100%" y2="0%"',right:'x1="100%" y1="0%" x2="0%" y2="0%"',top:'x1="0%" y1="0%" x2="0%" y2="100%"',bottom:'x1="0%" y1="100%" x2="0%" y2="0%"'}};return function(b,c){var d='<linearGradient id="g" '+a.dirs[b]+' spreadMethod="pad">';return c.forEach(function(a){d+='<stop offset="'+a.offset+'" stop-color="'+a.color+'" stop-opacity="'+a.opacity+'"/>'}),d="data:image/svg+xml;base64,"+btoa(a.open+d+a.close)}}();!function(){var a="undefined"!=typeof window?window:exports,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=function(){try{document.createElement("$")}catch(a){return a}}();a.btoa||(a.btoa=function(a){for(var d,e,f=0,g=b,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&d>>8-f%1*8)){if(e=a.charCodeAt(f+=.75),e>255)throw c;d=d<<8|e}return h}),a.atob||(a.atob=function(a){if(a=a.replace(/=+$/,""),a.length%4==1)throw c;for(var d,e,f=0,g=0,h="";e=a.charAt(g++);~e&&(d=f%4?64*d+e:e,f++%4)?h+=String.fromCharCode(255&d>>(-2*f&6)):0)e=b.indexOf(e);return h})}();var q=p("bottom",[{offset:"0%",color:"black",opacity:"1"},{offset:"100%",color:"black",opacity:"0"}]),r=(p("top",[{offset:"0%",color:"black",opacity:"1"},{offset:"100%",color:"white",opacity:"1"}]),p("top",[{offset:"0%",color:"#FF0000",opacity:"1"},{offset:"16.666666666666668%",color:"#FFFF00",opacity:"1"},{offset:"33.333333333333336%",color:"#00FF00",opacity:"1"},{offset:"50%",color:"#00FFFF",opacity:"1"},{offset:"66.66666666666667%",color:"#0000FF",opacity:"1"},{offset:"83.33333333333334%",color:"#FF00FF",opacity:"1"},{offset:"100%",color:"#FF0000",opacity:"1"}])),s={photoshop:{pickerBoxHeight:148,setElement:function(a,b,c){this.elm=a,this.elm.className+=" ColorPickerPicker ColorPickerPhotoshop",this.posIndecator=document.createElement("div"),this.posIndecator.style.cssText="position:absolute;border-radius:50%;width:9px;height:9px;background:transparent;border:2px solid #eee;pointer-events:none;position:relative;",this.elm.appendChild(this.posIndecator),this.photoshoptIEGradSetup=[{offset:"0%",color:c,opacity:"1"},{offset:"100%",color:"white",opacity:"1"}],this.render(c)},render:function(a,b){if(!b){var c=this.posFromColor(a);this.setPos(c);var d=[c.hue];d[0]*=360,d[1]="100%",d[2]="50%",a="hsl("+d.join()+")"}if(p){this.photoshoptIEGradSetup[0].color=a;var e=p("left",this.photoshoptIEGradSetup);this.elm.style.backgroundImage='url("'+q+'"),url("'+e+'")'}else this.elm.style.backgroundImage="-webkit-linear-gradient(bottom, black, rgba(0,0,0,0)),-webkit-linear-gradient(left, "+a+", white)",this.elm.style.backgroundImage="-moz-linear-gradient(bottom, black, rgba(0,0,0,0)),-moz-linear-gradient(left, "+a+", white)"},setPos:function(a){this.pos=a,setTimeout(function(){var b=parseFloat(getComputedStyle(this.elm).height||this.pickerBoxHeight),c=parseFloat(getComputedStyle(this.elm).width||this.pickerBoxHeight);this.posIndecator.style.left=-6+a.x*c+"px",this.posIndecator.style.top=-6+a.y*b+"px"}.bind(this),0)},posFromColor:function(a){var b,c,d,e=i(a);return b=1-e[1],d=(100*e[2]+50*b+50)/50,c=d/(b+1),c=1-(c-1),0>c&&(b-=c,c=0),{x:b,y:c,hue:e[0]}},colorFromPos:function(a,b,c){this.setPos(a);var d=360*b,e=100-100*a.x,f=-50*a.y+50*a.x+50-a.y*a.x*50;return"hsla("+d+", "+e+"% , "+f+"%, "+c+")"}},single:{setElement:function(a,b){this.elm=a,this.elm.className+=" ColorPickerPicker ColorPickerSingle",this.render(b)},render:function(a){this.elm.style.backgroundColor=a},colorFromPos:function(){return this.elm.style.backgroundColor.replace(/\s/g,"")}},palete:{setElement:function(a,b){this.elm=a,this.elm.className+=" ColorPickerPicker ColorPickerPalete",this.elm.style.position="relative",this.posIndecator=document.createElement("div"),this.posIndecator.style.cssText='position:absolute;width:19px;height:12px;top:0;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAMCAYAAAH317YUAAABXUlEQVQokY2SPUiCURSGn2sukqRBSwb9EEU/hF9OESQ1RSH9LK06NgS5WYgYktXW0g+0fC7tBtISmAZBkwoNEg1ORU0mTU23wU/5flR84XDgnPe89773HqijCkgBEClIiQ7SBlQjBYkAEItBeXqZaraFnqrltABcZ0X50+gczAvsQK1q0DaOw8SSLOczmDHtcSGAOBD2Z6TbwtDwFBAmRahGS9aBpGKmwbnmQB8VPU09ybyGtn3DhqmL7FvzyOLOg1R8A9Z7ZT/BDsQnw6ry9Qf3H60NNJS860dqaW4j1JLUo+Xv99xdun9odNczpWATGMLqT2eEwZnQfuwYt9PRgQa5lwL5mwR2U90FpFE2l/eS16yM9XYUaaDsmIWraP0htNqW0x9UVmMpRpz1wnOtKy1+nX2A0aYXyC0cqu7xtVB3Kjrc+q2r0xQNJFS3t81vtEKr9TKLVrCuW7t4/Ac4FWWuJ2UyAAAAAABJRU5ErkJggg==");border:0;left:1px;pointer-events:none;',this.elm.appendChild(this.posIndecator);var c=i(b);this.setPos(c[0]),this.render(b)},setPos:function(a){this.paletePosY=a,setTimeout(function(){var b=parseFloat(getComputedStyle(this.elm).height);this.posIndecator.style.top=a*(b-1)-6+"px"}.bind(this),0)},render:function(){p?this.elm.style.backgroundImage='url("'+r+'")':(this.elm.style.backgroundImage="-webkit-linear-gradient(top, #FF0000, #FFFF00, #00FF00, #00FFFF, #0000FF, #FF00FF, #FF0000)",this.elm.style.backgroundImage="-moz-linear-gradient(top, #FF0000, #FFFF00, #00FF00, #00FFFF, #0000FF, #FF00FF, #FF0000)")},posFromColor:function(a){var b=i(a);return b[0]},colorFromPos:function(a){return this.setPos(a.y),"hsla("+360*a.y+",100%,50%, 1)"},hueFormPos:function(a){return this.setPos(a.y),360*a.y}},opacity:{setElement:function(a,b){this.elm=a,this.elm.className+=" ColorPickerPicker ColorPickerOpacityPalete",this.elm.style.position="relative",this.posIndecator=document.createElement("div"),this.posIndecator.style.cssText="position:absolute;width:100%;height:4px;top:0;left:-1px;background:black;border:1px solid #eee;pointer-events:none;",this.elm.appendChild(this.posIndecator),this.ieGOpacityGradSetup=[{offset:"0%",color:b,opacity:"1"},{offset:"100%",color:b,opacity:"0"}],this.setColor(b)},setPos:function(a){this.paletePosY=a,setTimeout(function(){var b=parseFloat(getComputedStyle(this.elm).height);this.posIndecator.style.top=a*(b-1)-3+"px"}.bind(this),0)},getOpacity:function(){return 1-this.paletePosY},setColor:function(a){var b=i(a);this.setPos(1-b[3]),this.render(b)},render:function(a){var b="hsla("+360*a[0]+","+100*a[1]+"%,"+100*a[2]+"%,1)",c="hsla("+360*a[0]+","+100*a[1]+"%,"+100*a[2]+"%,0)";p?(this.ieGOpacityGradSetup[0].color=b,this.ieGOpacityGradSetup[1].color=b,this.elm.style.backgroundImage='url("'+p("top",this.ieGOpacityGradSetup)+'")'):(this.elm.style.backgroundImage="-webkit-linear-gradient(top, "+b+", "+c+")",this.elm.style.backgroundImage="-moz-linear-gradient(top, "+b+", "+c+")")},posFromColor:function(a){var b=i(a);return 1-b[3]}}};return function(b,c,d){function f(a,b,c){var d;return a===x.elm&&(x.hueFormPos(b),d=y.colorFromPos(y.pos,x.paletePosY,B.getOpacity()),B.setColor(d),y.render(x.colorFromPos(b),!0),w.call("onpalete"+c,d)),a===B.elm&&(B.setPos(b.y),d=y.colorFromPos(y.pos,x.paletePosY,B.getOpacity()),w.call("onopacity"+c,d)),a===y.elm&&(d=y.colorFromPos(b,x.paletePosY,B.getOpacity()),B.setColor(d),w.call("onpicker"+c,d)),d&&w.call("oncolorpickerchange",o?h(d):d),d}function g(a){y.render(a),x.setPos(y.pos.hue),A.render(a),z.render(a),B.setColor(a)}function l(b,c,f){function h(b){s.value=o?a(b[0],b[1],b[2]).substr(1):"rgba("+b[0]+","+b[1]+","+b[2]+","+b[3]+")"}function j(){return o?"#"+s.value:s.value}function k(a){if(a.target===s)try{return g(s.value),A.render(j()),z.render(j()),w.call("oncolorpickerchange",j())}catch(a){}var b=("hsla("+n.value+","+p.value+"%,"+q.value+"%,"+r.value+")",e.apply(null,[n.value/360,p.value/100,q.value/100,r.value]));b[0]=b[0]<<0,b[1]=b[1]<<0,b[2]=b[2]<<0,h(b),g(s.value),A.render(j()),z.render(j()),w.call("oncolorpickerchange",j())}function l(a){a.target===n&&(a.target.value=Math.max(Math.min(a.target.value,360),0)||0),(a.target===p||a.target===q)&&(a.target.value=Math.max(Math.min(a.target.value,100),0)||0),a.target===r&&(a.target.value=Math.max(Math.min(a.target.value,1),0)||1)}function m(a){var b=i(a);n.value=360*b[0]<<0,p.value=100*b[1]<<0,q.value=100*b[2]<<0,r.value=Number.prototype.toFixed.call(+b[3],4);var c=e.apply(null,b);c[0]=c[0]<<0,c[1]=c[1]<<0,c[2]=c[2]<<0,h(c)}var n=b.querySelector(".colorpicker-hue"),p=b.querySelector(".colorpicker-saturation"),q=b.querySelector(".colorpicker-lightness"),r=b.querySelector(".colorpicker-opacity"),s=v.querySelector(".colorpicker-color");return v.querySelector(".change-picker-label").onclick=function(){d&&d(null)},m(f),w.on("oncolorpickerchange",m),b.addEventListener("change",l,!1),b.addEventListener("change",k,!1),c.addEventListener("change",l,!1),c.addEventListener("change",k,!1),m}function p(a){t&&z.render(f(t,m(a,t),"move"))}function q(a){if(t){document.body.onselectstart=u;var b=t;t=!1;var c=f(b,m(a,b),"click");A.render(c),z.render(c)}}function r(a){u=document.body.onselectstart||null,document.body.onselectstart=function(){return!1},t=a.target;var b=f(t,m(a,t),"click");z.render(b)}var t=!1,u=null,v=b,w=k(v,{oncolorpickerchange:[],onpickerclick:[],onpaleteclick:[],onopacityclick:[],onpickermove:[],onpaletemove:[],onopacitymove:[]}),x=Object.create(s.palete),y=Object.create(s.photoshop),z=Object.create(s.single),A=Object.create(s.single),B=Object.create(s.opacity);j(v),x.setElement(v.querySelector(".colorpicker-color-palete"),c),y.setElement(v.querySelector(".colorpicker-lightsat-palete"),x,c),B.setElement(n("100%","100%",v.querySelector(".colorpicker-opacity-palete")),c),z.setElement(n("100%","100%",v.querySelector(".colorpicker-current")),c),A.setElement(n("100%","100%",v.querySelector(".colorpicker-priveuse")),c);var C=l(v.querySelector(".colorpicker-picker-inputs"),v.querySelector(".colorpicker-picker-inputs-extra"),c);return v.addEventListener("mousedown",r,!1),window.addEventListener("mouseup",q,!1),window.addEventListener("mousemove",p,!1),{on:w.on,elm:v,setColor:function(a){return g(a),C(a),this},getColor:function(){return A.colorFromPos()},isVisible:function(){return"none"!==v.style.display},hide:function(){return v.style.display="none",this},show:function(a){return v.style.display="block",a&&a.appendChild(v),this}}}}();return b}();!function(a){function b(a){var b=$("<div>");return a.id&&b.prop("id",a.id),b.attr("wix-ctrl",a.ctrl),a.model&&b.attr("wix-model",a.model),a.param&&b.attr("wix-param",a.param),a.html&&b.html(a.html),a.appendTo&&b.appendTo(a.appendTo),b[a.ctrl](a.options||{}),Wix.UI.initializePlugin(b),b}function c(){var a=["<ui-lib>"];a.push.apply(a,arguments)}function d(a,b){if(!d.isInitialized){d.isInitialized=!0,d.retry=++d.retry||1;var c=$("body");if(c.length>1)throw new Error("You have more then one wix-uilib element in the DOM.");g(c),x.setInitialValues(a),b&&x.onChange("*",b),u();for(var e=c.andSelf().find("[data-wix-controller], [wix-controller], [wix-ctrl], [data-wix-ctrl], [wix-tooltip], [wix-scroll]"),f=0;f<e.length;f++)try{i(e[f])}catch(a){console.log&&console.log("Plugin Initialization Error")}y.applyStyleMigration&&y.applyStyleMigration(),c.fadeIn(140,function(){$(document.body).trigger("uilib-update-scroll-bars")})}}function e(){function b(a){window.jQuery&&window.jQuery.holdReady&&window.jQuery.holdReady(a)}var c;window.Wix&&("standalone"===Wix.Utils.getViewMode()?setTimeout(function(){if(!a.__disableStandaloneError__)throw new Error('Standalone mode: Wix style params are not available outside of the "wix editor"')},0):(b(!0),c=setTimeout(function(){if(b(!1),!a.__disableStandaloneError__)throw new Error('Style params are not available outside of the "wix editor", if you are in the editor ')},3333),(Wix.Styles||Wix).getStyleParams(function(){clearTimeout(c),b(!1)})))}function f(){try{var a=window.location.search.match(/instance=([^&]+)/);return JSON.parse(atob(a[1].split(".")[1])).vendorProductId||null}catch(a){return null}}function g(a){var b=a.find("[wix-premium],[data-wix-premium]"),c=a.find("[wix-not-premium], [data-wix-not-premium]"),d=f();d?(b.show(),c.remove()):(b.remove(),c.show())}function h(a,b){var c=a.getAttribute(b);return c||(c=a.getAttribute("data-"+b)),c}function i(a,b){if(a instanceof jQuery)return a.each(function(){i(this,b)});var c=j(a);if(c){var d=s(c),e=q(a,c);l(a,d,b||e)}var f=h(a,"wix-tooltip");f&&l(a,"Tooltip",o(f)||{});var g=h(a,"wix-scroll");g&&l(a,"Scrollbar",o(g)||{})}function j(a){return h(a,"wix-controller")||h(a,"wix-ctrl")}function k(a,b){if(a instanceof jQuery)return a.each(function(){k(this,b)});var c=j(a),d=s(c),e=h(a,"wix-model"),f=$(a),g=f.data("plugin_"+d);g&&g.destroy?g.destroy():(f.off(),f.find("*").off(),f.remove()),b&&x.removeKey(e)}function l(a,b,d){b=p(b),$.fn[b]?(c("initializing "+b,d),$(a)[b](d)):console.error("Plugin "+b+" does not exist");var e=m(a,b),f=n(a,b);if(e&&f)throw new Error("You cannot use wix-param in conjunction with wix-model, only one of them can be used per component.")}function m(a,b){var c=h(a,"wix-param");return c&&y.bindKeyToPlugin(a,b,c),c}function n(a,b){var c=h(a,"wix-model");return c&&x.bindKeyToPlugin(a,b,c),c}function o(a){try{return new Function("return "+a+";")()}catch(b){throw new Error("Options for plugin are not valid: "+a)}}function p(a){return a}function q(a,b){var c=r(b);return c||(c=h(a,"wix-options")),o(c)||{}}function r(a){var b=a.indexOf(":");return-1!==b&&a.substr(b+1)}function s(a){var b=a.indexOf(":");return $.trim(-1!==b?a.substr(0,b):a)}function t(){var a={props:{},handlers:[],reporters:{},isReporting:!0,get:function(b){if(!a.props.hasOwnProperty(b))throw new Error('There is no "'+b+'" in this model. try to define "wix-model" in your markup.');return a.props[b]},set:function(b,c,d,e,f){var g=!1;if(!a.props.hasOwnProperty(b))throw new Error('There is no "'+b+'" in this model. try to define "wix-model" in your markup.');c&&c._model_ignore_set_&&(delete c._model_ignore_set_,g=!0);var h=a.props[b];if(h!==c){if(a.props[b]=c,d||a.trigger(b,c),g)return;a.triggerReporters(b,c,f)}},removeKey:function(b){a.handlers=a.handlers.filter(function(a){return a.key!==b}),delete a.reporters[b],delete a.props[b]},setAndReport:function(b,c,d){a.set(b,c,!!d||!1,!0)},setInitialValues:function(b){$.extend(a.props,b)},bindKeyToPlugin:function(b,c,d){function e(a){g.setValue&&g.setValue(a)}var f=$(b),g=f.data("plugin_"+c);if(!g)throw new Error('wix-model is not supported in this plugin "'+c+'"');var h=a.props[d];void 0!==h?(g.setValue&&g.setValue(h),a.props[d]=g.getValue?g.getValue():h):(h=g.getValue?g.getValue():void 0,a.props[d]=h),f.on(c+".change",function(b,c){a.set(d,c,!1,!1,g)}),a.reporters[d]=a.reporters[d]||[],e.plugin=g,a.reporters[d].push(e)},onChange:function(b,c){if("function"!=typeof c)throw new Error(b+": You must provide fn as handler to the Model change event.");a.handlers.push({fn:c,key:b})},trigger:function(b,c){for(var d=0;d<a.handlers.length;d++)try{var e=a.handlers[d];("*"===e.key||e.key===b)&&e.fn.call(a,c,b)}catch(a){setTimeout(function(){throw a},0)}},triggerReporters:function(b,c,d){if(a.isReporting)for(var e=this.reporters[b],f=0;f<e.length;f++){var g=e[f];if(g.plugin!==d)try{g.call(a,c,b)}catch(a){setTimeout(function(){throw a},0)}}},toJSON:function(){return $.extend({},a.props)}};return a}function u(){function a(a){return a.fontStyleParam===!0}function b(a){return!(!c(a)||a.fontParam!==!0)}function c(a){return!!(a instanceof Number||"number"==typeof a||!isNaN(+a.index)&&a.value)}function d(a){return a.index||0===a.index?a.index:a}if(window.Wix){var e=(Wix.Styles||Wix).getStyleParams();if(!y.applyStyleMigration){var f;try{f=w(e)}catch(a){setTimeout(function(){throw a},0),f={}}y.setInitialValues(f)}y.onChange("*",function(e,f){var g=Wix.Styles||Wix.Settings;b(e)||a(e)?Wix.Styles.setFontParam(f,{value:e}):c(e)?g.setNumberParam(f,{value:d(e)}):Object.prototype.toString.call(e).match("Boolean")?g.setBooleanParam(f,{value:e}):e&&(e.hasOwnProperty("color")||e.cssColor||e.rgba)&&g.setColorParam(f,{value:e})})}}function v(a){y.applyStyleMigration=function(){for(var b in a)a.hasOwnProperty(b)&&y.set(b,a[b])}}function w(a){a=a||{};var b={};for(var c in a.colors)if(a.colors.hasOwnProperty(c))if(a.colors[c].themeName&&0===a.colors[c].value.indexOf("rgba")){var d=a.colors[c].value.match(/,([^),]+)\)/);d=d?+d[1]:1,b[c]={color:{reference:a.colors[c].themeName,value:a.colors[c].value},rgba:a.colors[c].value,opacity:d}}else b[c]=a.colors[c].themeName||a.colors[c].value;for(var c in a.numbers)a.numbers.hasOwnProperty(c)&&(b[c]=a.numbers[c]);for(var c in a.booleans)a.booleans.hasOwnProperty(c)&&(b[c]=a.booleans[c]);for(var c in a.fonts)a.fonts.hasOwnProperty(c)&&(b[c]=a.fonts[c]);return b}e(a.__disableStandaloneError__);var x=t(),y=t();a.UI={initialize:d,initializePlugin:i,create:b,destroy:k,initStyleMigration:v,set:x.setAndReport,get:x.get,toJSON:x.toJSON,onChange:x.onChange}}(window.Wix||window),jQuery.fn.definePlugin("Accordion",function(a){return{init:function(){this.markup(),this.showFirst(),this.bindEvents(),this.applyCSS()},markup:function(){this.$el.hasClass("accordion")||this.$el.addClass("accordion"),this.options.border&&(this.$el.find("."+this.options.triggerClass).addClass(this.options.borderClass),this.$el.find("."+this.options.triggerClass).find("li:nth-last-child(1)").addClass("last-child"))},getDefaults:function(){return{triggerClass:"acc-pane",triggerCSS:{},borderClass:"border",contentClass:"acc-content",contentCSS:{},animationTime:150,activeClass:"acc-active",ease:"linear",openByDeafult:"acc-open",value:0,toggleOpen:!0,border:!0}},showFirst:function(){var a=this.options;this.$el.find("."+a.contentClass).hide();var b,c=this.$el.find("."+a.triggerClass);b="string"==typeof this.options.value?c.filter(this.options.value):c.eq(this.options.value||0);var d=this.$el.find("."+a.triggerClass+"."+a.openByDeafult);b=b.add(d),b.addClass(a.activeClass+" "+a.openByDeafult).find("."+a.contentClass).css("display","block")},getValue:function(){for(var a=this.$el.find("."+this.options.triggerClass),b=0;b<a.length;b++)if(a.eq(b).hasClass(this.options.activeClass))return b;return-1},setValue:function(a){var b=this.options;"number"==typeof a&&(a=this.$el.find("."+b.triggerClass).eq(a)),a.find("."+b.contentClass).is(":hidden")?this.openElementContent(a):b.toggleOpen&&this.closeElementContent(a)},closeElementContent:function(){var b=this.options;this.$el.find("."+b.triggerClass).removeClass(b.openByDeafult).removeClass(b.activeClass).find("."+b.contentClass).slideUp(b.animationTime,b.ease,function(){a(document.body).trigger("uilib-update-scroll-bars")})},openElementContent:function(b){var c=this.options;this.closeElementContent(b);var d=b.toggleClass(c.activeClass).find("."+c.contentClass);d.slideDown(c.animationTime,c.ease,function(){d.css("overflow","visible"),a(document.body).trigger("uilib-update-scroll-bars")})},applyCSS:function(){this.$el.find("."+this.options.contentClass).css(this.options.contentCSS),this.$el.find("."+this.options.triggerClass).css(this.options.triggerCSS)},bindEvents:function(){var b=this;this.$el.on("click","."+this.options.triggerClass,function(c){0===a(c.target).parents("."+b.options.contentClass).length&&(c.preventDefault(),b.setValue(a(this)),b.triggerChangeEvent(b.getValue()))})}}}),jQuery.fn.definePlugin("ButtonGroup",function(a){"use strict";var b={btnGroupClass:"btn-group",valueAttrName:"data-value",indexAttrName:"data-index",selectedClass:"btn-selected",btnBaseClass:"uilib-btn",btnClass:"uilib-btn btn-secondary btn-small",btnClassToDeprecate:"btn",btnSelectedClassToDeprecate:"active",types:{single:"single",toggle:"toggle"}};return{init:function(){this.$selected=null,this.markup(),this.setValue(this.options.value),this.bindEvents()},getDefaults:function(){return{value:0,mode:"single"}},markup:function(){this.$el.addClass(b.btnGroupClass),this.getOptionsButtons().addClass(b.btnClass+" "+b.btnClassToDeprecate)},getOptionsButtons:function(){return this.$el.find("button")},setValueSingleMode:function(c){var d,e=this.getOptionsButtons();"number"==typeof c?d=e.eq(c):"string"==typeof c?d=e.filter('[value="'+c+'"], ['+b.valueAttrName+'="'+c+'"]').eq(0):a(c).hasClass(b.btnClass)?d=c:c&&"object"==typeof c&&(d=e.eq(c.index)),d.length&&(e.removeClass(b.selectedClass+" "+b.btnSelectedClassToDeprecate),d.addClass(b.selectedClass+" "+b.btnSelectedClassToDeprecate),this.$selected=d)},toggleActiveClass:function(a){a.toggleClass(b.selectedClass+" "+b.btnSelectedClassToDeprecate)},setValueToggleMode:function(a){var c=this.getOptionsButtons(),d=b.selectedClass+" "+b.btnSelectedClassToDeprecate;for(var e in a)if(a.hasOwnProperty(e)){var f=c.filter('[value="'+e+'"], ['+b.valueAttrName+'="'+e+'"]').eq(0);a[e]?f.addClass(d):f.removeClass(d)}},setValue:function(a){this.isSingleMode()?this.setValueSingleMode(a):this.setValueToggleMode(a)},getValueFromEl:function(a){return a.attr(b.valueAttrName)||a.val()},getValue:function(){if(this.isSingleMode())return{index:this.getIndex(this.$selected),value:this.getValueFromEl(this.$selected)};var c={},d=this.getOptionsButtons(),e=this;return d.each(function(){var d=a(this);c[e.getValueFromEl(d)]=d.hasClass(b.selectedClass+" "+b.btnSelectedClassToDeprecate)}),c},getIndex:function(a){return+this.getOptionsButtons().index(a)},isSingleMode:function(){return this.options.mode===b.types.single},bindEvents:function(){function c(a){e.toggleActiveClass(a),e.triggerChangeEvent(e.getValue())}function d(a){var b=e.getValueFromEl(a);e.getValueFromEl(e.$selected)!==b&&(e.setValue(b),e.triggerChangeEvent(e.getValue()))}var e=this;this.$el.on("click","."+b.btnBaseClass,function(){e.isSingleMode()?d(a(this)):c(a(this))})}}}),jQuery.fn.definePlugin("ToggleButtonGroup",function(){"use strict";return{init:function(){this.options.mode="toggle",this.buttonGroup=this.$el.ButtonGroup(this.options).getCtrl()},getDefaults:function(){return{value:0}},setValue:function(a){return this.buttonGroup.setValue(a)},getValue:function(){return this.buttonGroup.getValue()},bindEvents:function(){},markup:function(){}}}),jQuery.fn.definePlugin("Checkbox",function(){"use strict";var a={checkboxClass:"uilib-checkbox",checkedClass:"checked"};return{init:function(){this.options.value=void 0!==this.options.value?this.options.value:this.options.checked,this.markup(),this.bindEvents(),this.setValue(this.options.checked)},getDefaults:function(){return{checked:!1,preLabel:"",postLabel:"",value:void 0}},markup:function(){this.$el.hasClass(a.checkboxClass)||this.$el.addClass(a.checkboxClass),this.$el.append('<span class="uilib-checkbox-check"></span>'),this.options.preLabel&&this.$el.prepend('<span class="uilib-text uilib-checkbox-preLabel">'+this.options.preLabel+"</span>"),this.options.postLabel&&this.$el.append('<span class="uilib-text uilib-checkbox-postLabel">'+this.options.postLabel+"</span>")},bindEvents:function(){this.$el.on("click",this.toggleChecked.bind(this))},getValue:function(){return this.$el.hasClass(a.checkedClass)},setValue:function(b){b?this.$el.addClass(a.checkedClass):this.$el.removeClass(a.checkedClass)},toggleChecked:function(){this.$el.toggleClass(a.checkedClass),this.triggerChangeEvent(this.getValue())}}}),jQuery.fn.definePlugin("ColorPicker",function(){"use strict";var a=["#50FAFE","#FFFFFF","#0088CB","#ED1C24","#FFCB05","#CECECE","#9C9C9C","#6C6C6C","#484848","#242424","#C4EEF6","#A5E1ED","#59CEE5","#3B8999","#1D444C","#FFFDFD","#999999","#666666","#444444","#000000","#E4A3B8","#CA748F","#AF1A49","#751131","#3A0818","#D5E7A6","#B8CF78","#8EB71D","#5E7A13","#2F3D09"].map(function(a,b){return{value:a,reference:"color-"+b}});return{init:function(){this.options.value=void 0!==this.options.value?this.options.value:this.options.startWithColor,this.isParamConected=this.options.isParamConected||this.$el.attr("wix-param")||this.$el.attr("data-wix-param"),this.siteColors=(Wix.Styles||Wix.Settings).getSiteColors()||a,this.markup()},getDefaults:function(){return{startWithColor:"color-1",value:void 0}},markup:function(){this.picker=createColorBox({element:this.$el[0],color:this.options.value,isParamConected:this.isParamConected,primColors:this.siteColors.slice(0,5),paleteColors:this.siteColors.slice(5),onchange:this.changeEventHandler.bind(this)})},getValue:function(){return this.picker.getColor()},setValue:function(a){var b;try{this.isParamConected&&"string"==typeof a?b=(Wix.Styles||Wix.Settings).getColorByrefrence(a):this.isParamConected&&a.color.reference&&(b=a.color),b=b.reference}catch(a){}this.picker.setColor(b||a.cssColor||a.rgba||a)},changeEventHandler:function(a){var b=this;clearTimeout(this.$timeoutTicket),this.$timeoutTicket=setTimeout(function(){var c={cssColor:a};"string"==typeof a||a&&"object"==typeof a&&(c.color=a,c.cssColor=a.value,b.isParamConected||delete c.color),b.triggerChangeEvent(c)},10)},getColorObject:function(){return this.picker.getColorObject()},bindEvents:function(){}}}),jQuery.fn.definePlugin("ColorPickerWithOpacity",function(a){"use strict";function b(b){var c=1;return b=a.trim(b),"#"===b.charAt(0)?c=1:0===b.indexOf("rgba")||0===b.indexOf("hsla")?(c=b.match(/,([^),]+)\)/),c=c?+c[1]:1):0===b.indexOf("rgb")&&(c=1),c}function c(b){var c;return b=a.trim(b),c="#"===b.charAt(0)?b:0===b.indexOf("rgba")?b.replace("rgba","rgb").replace(/,([^),]+)\)/,")"):0===b.indexOf("rgb")?b:b}return{init:function(){this.options.value=void 0!==this.options.value?this.options.value:this.options.startWithColor,this.options.isParamConected=this.$el.attr("wix-param")||this.$el.attr("data-wix-param"),this.markup(),this.setValue(this.options.value),this.setOpacity(this.options.startWithOpacity),this.bindEvents()},markup:function(){this.$el.addClass("picker-with-opacity"),this.$ColorPicker=a("<div>").ColorPicker(this.options),this.$Slider=a("<div>").Slider({preLabel:"0",postLabel:"100",value:this.options.startWithOpacity,toolTip:!1}),this.options.divider?this.$el.append(this.$ColorPicker,a('<span class="uilib-text" style="margin: 0 0 0 10px">').text(this.options.divider),this.$Slider):this.$el.append(this.$ColorPicker,this.$Slider)},bindEvents:function(){this.$ColorPicker.on("ColorPicker.change",this.colorChangedInInnerPlugins.bind(this,"color")),this.$Slider.on("Slider.change",this.colorChangedInInnerPlugins.bind(this,"opacity"))},getValue:function(){var a=this.getPlugins(),b=a.colorPicker.getValue(),c=a.slider.getValue()/100;return 0===b.indexOf("rgba")||0===b.indexOf("hsla")?b.replace(/,\s*([\d\.]+)\s*\)/,","+c+")"):b.replace(/rgb/,"rgba").replace(")",","+c+")")},setValue:function(a){var d=100,e="#000",f=this.getPlugins();a&&"object"==typeof a?(e=a.color&&a.color.reference?a.color.reference:a.rgba||a.cssColor,
d=100*(void 0!==a.opacity?a.opacity:b(e))):"string"==typeof a&&(e=c(a),d=100*b(a)),f.slider.setValue(d),f.colorPicker.setValue(e)},setOpacity:function(a){(a||0===a)&&this.getPlugins().slider.setValue(a)},getPlugins:function(){return{colorPicker:this.$ColorPicker.data("plugin_ColorPicker"),slider:this.$Slider.data("plugin_Slider")}},colorChangedInInnerPlugins:function(a,b){b.stopPropagation(),this.triggerChangeEvent({color:this.getPlugins().colorPicker.getColorObject(),opacity:this.getPlugins().slider.getValue()/100,rgba:this.getValue()})},getDefaults:function(){return{startWithColor:"rgba(255,0,0,1)"}}}}),jQuery.fn.definePlugin("Dropdown",function(a){"use strict";var b={extendedValueName:"data-value-extended",valueAttrName:"data-value",indexAttrName:"data-index",dropDownClassName:"dropdown",activeClassName:"focus-active",optionInitValueAttrName:"value",optionClassName:"option",optionsClassName:"options",selectedClassName:"selected",selectedOptionsClassName:"option-selected",highlightClassName:"dropdown-highlight",iconClassName:"dropdown-icon",hideTextClass:"dropdown-hideText",appendChildren:"data-append-children"},c={width:"100%",position:"absolute",top:"100%",zIndex:"999999"},d={down:'<span class="dropdown-arrow dropdown-arrow-down"></span>',up:'<span class="dropdown-arrow dropdown-arrow-up"></span>',left:'<span class="dropdown-arrow dropdown-arrow-left"></span>',right:'<span class="dropdown-arrow dropdown-arrow-right"></span>'};return{init:function(){this.options.value=void 0!==this.options.value?this.options.value:this.options.selected,this.$selected=null,this.$options=null,this.isParamMode=this.$el.attr("wix-param")||this.$el.attr("data-wix-param"),this.isOpen=!1,this.isActive=!1,this.markup(),this.setValue(this.options.value),this.bindEvents(),this.hideOptions(0)},getDefaults:function(){return{slideTime:150,selected:0,value:void 0,autoCloseTime:5e4,optionSelector:"[value]",spriteMap:"",hideText:!1,width:"",optionsWidth:"",height:"",style:"dropdown-style-1",modifier:function(a){return a}}},markup:function(){var e=this,f=this.$el.addClass(b.dropDownClassName+" "+this.options.style),g=this.$el.find(this.options.optionSelector).map(function(c){var d=this.getAttribute("style"),f=this.getAttribute(b.extendedValueName),g=this.getAttribute(b.appendChildren),h=a("<div>").attr(b.valueAttrName,this.getAttribute(b.optionInitValueAttrName)).attr(b.indexAttrName,c).addClass(b.optionClassName).addClass(this.className);g?h.append(this.children):h.text(this.textContent),f&&h.attr(b.extendedValueName,f),d&&h.attr("style",d),e.options.hideText&&h.addClass(b.hideTextClass);var i=this.getAttribute("data-icon");return i&&h.prepend('<img src="'+i+'" class="'+b.iconClassName+'"/>'),e.options.spriteMap&&h.addClass(e.options.spriteMap+c),h}).toArray();this.$selected=a("<div>").addClass(b.selectedClassName),this.$options=a("<div>").addClass(b.optionsClassName).append(g).css(c),this.options.width&&(this.$options.css("width",this.options.width),f.css("width",this.options.width)),this.options.optionsWidth&&this.$options.css("width",this.options.optionsWidth),this.options.height&&this.$options.css("height",this.options.height),this.$options.addClass("uilib-scrollbar"),this.$el.empty(),this.$el.append(d.down,this.$selected,this.$options)},setValue:function(a){var c;return a&&"object"==typeof a&&a.hasOwnProperty("value")&&(a=a.value),"number"==typeof a?c=this.$options.find("["+b.indexAttrName+'="'+a+'"]').eq(0):"string"==typeof a?c=this.$options.find("["+b.valueAttrName+'="'+a+'"]').eq(0):a instanceof jQuery&&(c=a),!(!c.length||this.getIndex()===c.attr(b.indexAttrName))&&(this.$options.find("."+b.selectedOptionsClassName).removeClass(b.selectedOptionsClassName),this.$selected.empty(),this.$selected.append(this.options.modifier(c.clone(!0).addClass("current-item").removeClass(b.highlightClassName),c)),c.addClass(b.selectedOptionsClassName),!0)},setValueFromEl:function(a){var c=+a.attr(b.indexAttrName);this.setValue(c)&&this.triggerChangeEvent(this.getValue())},setActiveMode:function(a){this.isActive=a,a?this.$el.addClass(b.activeClassName):this.$el.removeClass(b.activeClassName)},getIndex:function(){return+this.$selected.find("."+b.optionClassName).attr(b.indexAttrName)},getVal:function(){return this.$selected.find("."+b.optionClassName).attr(b.valueAttrName)},getValue:function(){return this.getFullValue()},getExtendedValue:function(){return this.$selected.find("."+b.optionClassName).attr(b.extendedValueName)},getFullValue:function(){return{value:this.getVal(),index:this.getIndex()}},hideOptions:function(a){this.$el.trigger("uilib-dropdown-close",this),this.isOpen=!1,this.$options.slideUp(void 0!==a?a:this.options.slideTime)},showOptions:function(a){var c=this.$options,d=c.find("["+b.indexAttrName+'="'+this.getIndex()+'"]').eq(0);this.isOpen=!0,this.highlightOption(d),c.slideDown(void 0!==a?a:this.options.slideTime,function(){c.css("overflow","auto")}),this.$el.trigger("uilib-dropdown-open",this)},toggleOptions:function(a){return this.isOpen?this.hideOptions(a):this.showOptions(a)},highlightOption:function(a){a.length&&(this.$options.find("."+b.highlightClassName).removeClass(b.highlightClassName),a.addClass(b.highlightClassName))},bindAutoClose:function(a){var b,c=this;this.$el.hover(function(){clearTimeout(b)},function(){clearTimeout(b),c.isOpen&&(b=setTimeout(function(){c.isOpen&&(c.setActiveMode(!1),c.hideOptions())},a))})},bindEvents:function(){function c(a,b){b!==e&&b.isOpen&&(e.hideOptions(),e.setActiveMode(!1))}function d(){e.hideOptions(),e.setActiveMode(!1)}var e=this;this.options.autoCloseTime&&this.bindAutoClose(this.options.autoCloseTime),a(document).on("uilib-dropdown-open",c),a(window).on("mousedown",d),this.whenDestroy(function(){a(document).off("uilib-dropdown-open",c),a(window).off("mousedown",d)}),this.$options.mousewheel&&this.$options.mousewheel(function(a){a.stopPropagation()}),this.$options.on("mouseenter","."+b.optionClassName,function(){e.highlightOption(a(this))}),this.$options.on("click","."+b.optionClassName,function(){e.setValueFromEl(a(this))}),this.$el.on("click",function(a){a.stopPropagation(),e.setActiveMode(!0),e.toggleOptions()}),this.$el.on("mousedown",function(a){a.stopPropagation()});var f=13,g=32,h=27,i=9,j=38,k=40,l=33,m=34,n=5,o=1;a(window).on("keydown",function(a){var c,d,p;if(e.isActive&&((a.which===f||a.which===g)&&(e.toggleOptions(),a.preventDefault()),(a.which===h||a.which===i)&&(e.hideOptions(),e.setActiveMode(!1),a.preventDefault()),a.which===j||a.which===k||a.which===l||a.which===m)){c=e.$options.find("["+b.indexAttrName+'="'+e.getIndex()+'"]').eq(0),d=a.which===j||a.which===l?"prev":"next",p=a.which===j||a.which===k?o:e.$options.height()/c.height()<<0||n;for(var q;p--;)q=c,c=c[d]("."+b.optionClassName),0===c.length&&(c=q);e.highlightOption(c),e.setValueFromEl(c),c.length&&e.$options.clearQueue().animate({scrollTop:e.$options.scrollTop()+c.position().top},200),a.preventDefault()}})}}}),jQuery.fn.definePlugin("FixedPositionControl",function(a){"use strict";function b(a){Wix.Settings.setWindowPlacement(Wix.Utils.getOrigCompId(),a.placement,a.verticalMargin,a.horizontalMargin)}function c(a,b,c){b.enable(),b.$el.removeClass(d(a)),a.placement=c,b.setValue(0,!0),"other"===d(a)?b.disable():b.$el.addClass(d(a))}function d(a){return"TOP_CENTER"===a.placement||"BOTTOM_CENTER"===a.placement?"horizontalMargin":"CENTER_RIGHT"===a.placement||"CENTER_LEFT"===a.placement?"verticalMargin":"other"}function e(a){Wix.Settings.getWindowPlacement(Wix.Utils.getOrigCompId(),a)}function f(){return{placements:["TOP_LEFT","TOP_CENTER","TOP_RIGHT","CENTER_LEFT","CENTER_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"],slider:{width:158,className:"",minValue:-2,maxValue:2,value:0,supportClick:!1},dropdown:{visibleRows:8,on:{}}}}function g(a,d){return{on:{create:function(){this.setIndexByValue(a.placement)},change:function(e){c(a,d,e.value),b(a)}}}}function h(b){var c=b.$el.width();b.$center=a('<div class="uilib-slider-back">'),b.$leftLine=a('<div class="uilib-slider-back">'),b.$rightLine=a('<div class="uilib-slider-back">'),b.$leftLine.css({left:c/4,background:"rgba(0,0,0,0.13)",width:1}).prependTo(b.$el),b.$center.css({left:c/2-1,background:"rgba(0,0,0,0.2)"}).prependTo(b.$el),b.$rightLine.css({left:c/4*3,background:"rgba(0,0,0,0.13)",width:1}).prependTo(b.$el),b.$ribbon=a('<div class="uilib-slider-back">').prependTo(b.$el)}function i(a,b){var c,d,e=a.$pin.width()/2,f=a.$el.width()/4;b>1&&(d=b-1,c=f*d,a.$ribbon.css({width:f-c+d*e,right:0,left:"auto",borderRadius:"0 8px 8px 0"})),b>=0&&1>=b&&(c=f*b,a.$ribbon.css({width:c,right:"auto",left:2*f,borderRadius:0})),-1>b&&(d=-1*b-1,c=f*d,a.$ribbon.css({width:f-c+d*e,left:0,right:"auto",borderRadius:"8px 0 0 8px"})),0>b&&b>=-1&&(c=-1*f*b,a.$ribbon.css({width:c,right:2*f,left:"auto",borderRadius:0}))}function j(a){return{create:function(){h(this),this.$el.addClass("other"===d(a)?"disabled":d(a))},slide:function(c){a[d(a)]=c,b(a),i(this,c)}}}function k(a,b){a.slider.create=function(){h(this),"function"==typeof b.sliderCreate&&b.sliderCreate.apply(this,arguments)},a.slider.slide=function(a){i(this,a),"function"==typeof b.sliderChange&&b.sliderChange.apply(this,arguments)},"function"==typeof b.dropDownChange&&(a.dropdown.on.change=b.dropDownChange),"function"==typeof b.dropDownCreate&&(a.dropdown.on.create=b.dropDownCreate)}return{init:function(b,c){c=this.options,b=this.$el[0],this.state={horizontalMargin:0,verticalMargin:0,placement:"TOP_LEFT"};var d=f();this.$el=a(b),this.createControlHTML(),Wix&&Wix.Utils&&"standalone"===Wix.Utils.getViewMode()&&(c.bindToWidget=!1),c.bindToWidget?this.initWithBinding(d,c):this._init(d,c)},_init:function(b,c){k(b,c),this.options=a.extend({},b,c),this.slider=this.createSlider(this.options.slider),this.dropdown=this.createDropDown(this.options.dropdown)},initWithBinding:function(b,c){var d=this;e(function(e){a.extend(d.state,e),a.extend(b.slider,j(d.state)),d.options=a.extend({},b,c),d.slider=d.createSlider(d.options.slider),a.extend(d.options.dropdown,g(d.state,d.slider)),d.dropdown=d.createDropDown(d.options.dropdown)})},createSlider:function(a){return a.value=this.state[d(this.state)]||0,this.$slider=this.$el.find(".glued-slider"),this.$slider.Slider(a).data("plugin_Slider")},getDefaults:function(){return{bindToWidget:!0}},markup:function(){},setValue:function(){},getValue:function(){},bindEvents:function(){},createDropDown:function(d){var e=this,f=a("<div>"),g=this.$el.find(".glued-dropdown").html(this.dropdownHTML()).find("select").replaceWith(f).find("option");return g.attr("data-icon","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),this.options.bindToWidget&&this.$el.on("Dropdown.change",function(a,d){c(e.state,e.slider,d.value),b(e.state)}),d.width=180,d.value=e.state.placement,f.append(g).Dropdown(d).getCtrl()},createControlHTML:function(){this.$el.append('<div class="glued-dropdown"></div><div class="divider gluedDivider"></div><div class="slider-wrapper"><div class="glued-slider"></div></div>')},dropdownHTML:function(){function a(a,b,c){return'<option value="'+a+'" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-imagecss="positionIcons '+b+'" selected="selected">'+c+"</option>"}var b=this.options.placements;0===b.length&&(b=["TOP_LEFT","TOP_CENTER","TOP_RIGHT","CENTER_LEFT","CENTER_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"]);var c=b.map(function(b){var c,d;switch(b){case"TOP_LEFT":c="topLeft",d="Top Left";break;case"TOP_RIGHT":c="topRight",d="Top Right";break;case"BOTTOM_RIGHT":c="bottomRight",d="Bottom Right";break;case"BOTTOM_LEFT":c="bottomLeft",d="Bottom Left";break;case"TOP_CENTER":c="top",d="Top";break;case"CENTER_RIGHT":c="right",d="Right";break;case"BOTTOM_CENTER":c="bottom",d="Bottom";break;case"CENTER_LEFT":c="left",d="Left"}return a(b,c,d)}).join("\n");return'<p>Select the position for your widget</p><select name="positionSelection" class="positionSelection">'+c+"</select>"}}}),jQuery.fn.definePlugin("FontPicker",function(){"use strict";function a(){return window.Wix&&Wix.Styles&&Wix.Styles.getFontsSpriteUrl()||e}function b(){return window.Wix&&Wix.Styles&&Wix.Styles.getEditorFonts()||[{lang:"",fonts:[{displayName:"Arial",fontFamily:"arial",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"helvetica",spriteIndex:5,cssFontFamily:"'arial','helvetica','sans-serif'"},{displayName:"Arial Black",fontFamily:"arial black",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","cyrillic"],permissions:"all",fallbacks:"gadget",spriteIndex:8,cssFontFamily:"'arial black','gadget','sans-serif'"},{displayName:"Comic Sans MS",fontFamily:"comic sans ms",cdnName:"",genericFamily:"cursive",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"comic-sans-w01-regular,comic-sans-w02-regular,comic-sans-w10-regular",spriteIndex:22,cssFontFamily:"'comic sans ms','comic-sans-w01-regular','comic-sans-w02-regular','comic-sans-w10-regular','cursive'"},{displayName:"Courier New",fontFamily:"courier new",cdnName:"",genericFamily:"monospace",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"courier-ps-w01,courier-ps-w02,courier-ps-w10",spriteIndex:30,cssFontFamily:"'courier new','courier-ps-w01','courier-ps-w02','courier-ps-w10','monospace'"},{displayName:"Georgia",fontFamily:"georgia",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"palatino,book antiqua,palatino linotype",spriteIndex:48,cssFontFamily:"'georgia','palatino','book antiqua','palatino linotype','serif'"},{displayName:"Impact",fontFamily:"impact",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"impact-w01-2010,impact-w02-2010,impact-w10-2010",spriteIndex:79,cssFontFamily:"'impact','impact-w01-2010','impact-w02-2010','impact-w10-2010','sans-serif'"},{displayName:"Lucida Console",fontFamily:"lucida console",cdnName:"",genericFamily:"monospace",provider:"system",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"lucida-console-w01",spriteIndex:94,cssFontFamily:"'lucida console','lucida-console-w01','monospace'"},{displayName:"Lucida Sans Unicode",fontFamily:"lucida sans unicode",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin"],permissions:"all",fallbacks:"lucida grande",spriteIndex:96,cssFontFamily:"'lucida sans unicode','lucida grande','sans-serif'"},{displayName:"Palatino Linotype",fontFamily:"palatino linotype",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"",spriteIndex:119,cssFontFamily:"'palatino linotype','serif'"},{displayName:"Tahoma",fontFamily:"tahoma",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext"],permissions:"all",fallbacks:"tahoma-w01-regular,tahoma-w02-regular,tahoma-w10-regular,tahoma-w15--regular,tahoma-w99-regular",spriteIndex:141,cssFontFamily:"'tahoma','tahoma-w01-regular','tahoma-w02-regular','tahoma-w10-regular','tahoma-w15--regular','tahoma-w99-regular','sans-serif'"},{displayName:"Times New Roman",fontFamily:"times new roman",cdnName:"",genericFamily:"serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"times",spriteIndex:143,cssFontFamily:"'times new roman','times','serif'"},{displayName:"Verdana",fontFamily:"verdana",cdnName:"",genericFamily:"sans-serif",provider:"system",characterSets:["latin","latin-ext","cyrillic"],permissions:"all",fallbacks:"geneva",spriteIndex:146,cssFontFamily:"'verdana','geneva','sans-serif'"}]}]}function c(a){var b=a.split(",");for(var c in b)b[c].indexOf('"')<0&&b[c].indexOf("'")<0&&(b[c]='"'+b[c]+'"');return b.toString()}function d(a,d){if(!a)throw new Error("Could not found sprite map url");var e=b(),f=document.createDocumentFragment();e.forEach(function(b){var d=b.fonts;for(var e in d){var g=d[e],h=g.characterSets.indexOf(b.lang),i=g.spriteIndex+h;g.cssFontFamily=c(g.cssFontFamily),g.cssFontFamily=g.cssFontFamily.replace(/\"/g,"'");var j=$('<div data-value-extended="'+g.cssFontFamily+'" value="'+g.fontFamily+'">'+g.displayName+"</div>").css({backgroundImage:'url("'+a+'")',backgroundRepeat:"no-repeat",backgroundPosition:"4px "+(-24*i+3)+"px"})[0];f.appendChild(j)}}),d.html(""),d.append(f)}var e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";return{init:function(){this.isParamMode=this.getParamKey(),this.markup(),this.bindEvents(),this.setValue(this.options.value)},markup:function(){var a=$("<div>");d(this.options.spriteUrl,a),this.$el.append(a),this.dropdown=a.Dropdown({hideText:this.options.spriteUrl!==e,width:265,height:200,value:this.options.value}).data("plugin_Dropdown")},bindEvents:function(){var a=this;this.$el.on("Dropdown.change",function(b,c){b.stopPropagation(),a.triggerChangeEvent(a.extendedValue(c))})},extendedValue:function(a){return this.isParamMode&&(a.fontParam=!0),$.extend(a,{cssFontFamily:this.dropdown.getExtendedValue(),family:a.value})},getDefaults:function(){return{value:"arial",spriteUrl:a()}},getValue:function(){return this.extendedValue(this.dropdown.getFullValue())},setValue:function(a){return a&&a.fontParam&&(a=a.family||a.value),this.dropdown.setValue(a)}}}),jQuery.fn.definePlugin("FontStylePicker",function(){"use strict";var a={fontStylePickerClass:"font-style-picker",presetSelectClass:"font-style-picker-preset-select",fontPickerClass:"font-style-picker-font-picker",fontSizeClass:"font-style-picker-font-size",textStyleClass:"font-style-picker-text-style"},b="Arial",c="arial",d="Custom",e='<div class="box-like-drop"><span class="box-like-drop-content">Font Picker</span><span class="box-like-arrow box-like-arrow-down"></span></div>',f='<div class="uilib-divider-row"><span class="font-picker-label">Style:</span><span class="style-place-holder"></span></div>';f+='<div class="uilib-divider-row"><span class="font-picker-label">Font:</span><span class="font-place-holder"></span></div>',f+='<div class="uilib-divider-row"><span class="font-picker-label"> </span><span class="props-place-holder"></span></div>';var g="";return g+='<button value="bold" class="grad-1" style="font-family: serif;font-weight: bold;">B</button>',g+='<button value="italic" class="grad-1" style="font-family: serif;font-style: italic;">I</button>',g+='<button value="underline" class="grad-1" style="font-family: serif;text-decoration: underline;">U</button>',{init:function(){this.isParamMode=this.getParamKey(),this.currentValue=null,this.popup=null,this.fontSizePicker=null,this.textStylePicker=null,this.fontPicker=null,this.presetSelectPicker=null,this.customVal={},this.markup(),this.setValue(this.options.value),this.bindEvents()},getDefaults:function(){return{value:"Body-L"}},markup:function(){this.$el.html(e),this.$el.addClass(a.fontStylePickerClass),this.createPopup(),this.createFontPicker(),this.createTextStylePicker(),this.createFontSizePicker(),this.createPresetPicker(),this.popup.content.innerHTML=f,$(this.popup.content).find(".style-place-holder").append(this.presetSelectPicker.$el.addClass(a.presetSelectClass)),$(this.popup.content).find(".font-place-holder").append(this.fontPicker.$el.addClass(a.fontPickerClass)),$(this.popup.content).find(".props-place-holder").append(this.fontSizePicker.$el.addClass(a.fontSizeClass),this.textStylePicker.$el.addClass(a.textStyleClass))},createFontSizePicker:function(){this.fontSizePicker=this.UI().create({ctrl:"Spinner",options:{size:"medium"},appendTo:this.$el}).getCtrl()},createTextStylePicker:function(){this.textStylePicker=this.UI().create({ctrl:"ToggleButtonGroup",html:g,appendTo:this.$el}).getCtrl()},createFontPicker:function(){this.fontPicker=this.UI().create({ctrl:"FontPicker",appendTo:this.$el}).getCtrl()},createPresetPicker:function(){var a="",b=this,d=this.getSiteTextPresets();Object.keys(d).sort().forEach(function(d){var e=b.getStyleFontByReference(d),f=e&&e.fontFamily||c,g=e&&e.size||"12px",h=' style="font-family:'+f+'"';a+=b.createStyleHtmlMarkup(d,d.replace(/-/g," "),f,g,h,"")}),a+=this.createCustomMarkup(),this.presetSelectPicker=this.UI().create({ctrl:"Dropdown",appendTo:this.$el,html:a,options:{width:265,height:260,value:1,modifier:function(a){var c=b.createSelectedStyleHtmlMarkup(a);return a.html(c),a}}}).getCtrl()},createCustomMarkup:function(){var a=this.fontPicker&&this.fontPicker.getValue()&&this.fontPicker.getValue().value||c,b=this.textStylePicker&&this.textStylePicker.getValue()&&this.textStylePicker.getValue()||{bold:!1,italic:!1,underline:!1},e=this.fontSizePicker&&this.fontSizePicker.getValue()||12,f=b.bold?"; font-weight: bold":"";f+=b.italic?"; font-style: italic":"",f+=b.underline?"; text-decoration: underline":"";var g=' style="font-family: '+a+f+'"';return this.customVal={size:e,family:a,preset:d,style:b},this.createStyleHtmlMarkup(d,d,a,e,g," custom")},createStyleHtmlMarkup:function(a,c,d,e,f,g){var h=this.getFontDisplayName(d)||b;return'<div data-append-children="true" value="'+a+'" class="font-style-option'+g+'" ><div'+f+' class="font">'+c+'</div><div class="description"><div class="font-description">'+h+"</div><div> , "+e+"</div></div></div>"},createSelectedStyleHtmlMarkup:function(a){var b=a.attr("data-value"),c=b==d?d:b.replace(/-/g," ");return'<div value="'+b+'">'+c+"</div>"},createPopup:function(){var a=this;this.popup=this.UI().create({ctrl:"Popup",options:{appendTo:this.$el,title:"Font Settings",content:"",footer:"",buttonSet:"okCancel",modal:!1,modalBackground:"rgba(0,0,0,0.5)",height:"auto",width:287,fixed:!0,onopen:function(){a.$el.append(this.arrow),a.currentValue=a.getValue()},onclose:function(){a.updateText()},oncancel:function(){a.setValue(a.currentValue),a.triggerChangeEvent(a.getValue())},onposition:function(){}}}).getCtrl(),this.popup.setRelativeElement(a.$el.find(".box-like-drop")[0])},hideArrow:function(){$(this.popup.arrow).hide(50)},showArrow:function(){$(this.popup.arrow).show(50)},bindEvents:function(){var a=this;this.$el.on("click",".box-like-drop",function(b){b.stopPropagation(),a.popup.toggle()}),this.registerToChangeEventAndDelegate(this.fontSizePicker,this),this.registerToChangeEventAndDelegate(this.textStylePicker,this),this.registerToChangeEventAndDelegate(this.fontPicker,this),this.registerToChangeEventAndDelegate(this.presetSelectPicker,this),this.$el.on("uilib-dropdown-close",function(b,c){c.isOpen&&$(a.popup.arrow).hasClass("popup-arrow-top")&&setTimeout(function(){a.showArrow()},50)}),this.$el.on("uilib-dropdown-open",function(){$(a.popup.arrow).hasClass("popup-arrow-top")&&a.hideArrow()}),this.whenDestroy(function(){this.fontSizePicker.destroy(),this.textStylePicker.destroy(),this.fontPicker.destroy(),this.presetSelectPicker.destroy()})},getSiteTextPresets:function(){var a={Title:{editorKey:"font_0",lineHeight:"1.1em",style:"normal",weight:"bold",size:"35px",fontFamily:"arial black",value:"font: normal normal bold 35px/1.1em arial black,gadget,sans-serif ; color: #333333;"},Menu:{editorKey:"font_1",lineHeight:"1.2em",style:"normal",weight:"bold",size:"17px",fontFamily:"arial",value:"font: normal normal bold 17px/1.2em arial,helvetica,sans-serif ; color: #FFE899;"},"Page-title":{editorKey:"font_2",lineHeight:"1.2em",style:"normal",weight:"bold",size:"50px",fontFamily:"arial",value:"font: normal normal bold 50px/1.2em arial,helvetica,sans-serif ; color: #133C2A;"},"Heading-XL":{editorKey:"font_3",lineHeight:"1.2em",style:"normal",weight:"bold",size:"80px",fontFamily:"arial",value:"font: normal normal bold 80px/1.2em arial,helvetica,sans-serif ; color: #133C2A;"},"Heading-L":{editorKey:"font_4",lineHeight:"1.2em",style:"normal",weight:"bold",size:"50px",fontFamily:"arial",value:"font: normal normal bold 50px/1.2em arial,helvetica,sans-serif ; color: #FFE899;"},"Heading-M":{editorKey:"font_5",lineHeight:"1.3em",style:"normal",weight:"normal",size:"25px",fontFamily:"arial",value:"font: normal normal normal 25px/1.3em arial,helvetica,sans-serif ; color: #EF6C6C;"},"Heading-S":{editorKey:"font_6",lineHeight:"1.2em",style:"normal",weight:"normal",size:"18px",fontFamily:"arial",value:"font: normal normal normal 18px/1.2em arial,helvetica,sans-serif ; color: #EF6C6C;"},"Body-L":{editorKey:"font_7",lineHeight:"1.2em",style:"normal",weight:"normal",size:"16px",fontFamily:"arial",value:"font: normal normal normal 16px/1.2em arial,helvetica,sans-serif ; color: #4D3613;"},"Body-M":{editorKey:"font_8",lineHeight:"1.2em",style:"normal",weight:"normal",size:"14px",fontFamily:"arial",value:"font: normal normal normal 14px/1.2em arial,helvetica,sans-serif ; color: #4D3613;"},"Body-S":{editorKey:"font_9",lineHeight:"1.2em",style:"normal",weight:"normal",size:"12px",fontFamily:"arial",value:"font: normal small-caps normal 12px/1.2em arial,helvetica,sans-serif ; color: #4D3613;"},"Body-XS":{editorKey:"font_10",lineHeight:"1.2em",style:"normal",weight:"normal",size:"10px",fontFamily:"arial",value:"font: normal small-caps normal 10px/1.2em arial,helvetica,sans-serif ; color: #4D3613;"}};return(Wix&&Wix.Styles?Wix.Styles.getSiteTextPresets():a)||a},getFontDisplayName:function(a){var c=Wix.Styles&&Wix.Styles.getSiteTextPresets(),d=Wix.Styles&&Wix.Styles.getEditorFonts();if(Wix.Styles&&c&&d)for(var e=0;e<d.length;++e)for(var f=d[e].fonts,g=0;g<f.length;++g){var h=f[g].cssFontFamily.indexOf(a);if(h>=0)return f[g].displayName}return b},getTextPreset:function(a){var b=this.getSiteTextPresets(),c=b[a];return c},getStyleFontByReference:function(a){return Wix&&Wix.Styles?Wix.Styles.getStyleFontByReference(a):{}},handlePluginPresetSelectChange:function(){var a=this.getSiteTextPresets(),b=this.presetSelectPicker.getValue().value,c=a[b];c?this.setValueFromPreset(b,c):this.setValueFromCustom()},checkPresetAgainstState:function(a,b){if(b.style.underline)return!1;var c=b.style.bold?"bold":"normal";if(c!==a.weight)return!1;var d=b.style.italic?"italic":"normal";return d===a.style&&(b.family===a.fontFamily&&b.size===parseInt(a.size,10))},getSimilarPresetName:function(){var a=this.getSiteTextPresets(),b=this.getValue();for(var c in a)if(a.hasOwnProperty(c)&&this.checkPresetAgainstState(a[c],b))return c;return null},handleNonPluginPresetSelectChange:function(){var a=this.getSimilarPresetName();a?this.presetSelectPicker.setValue(a):(this.updateCustomOption(),this.presetSelectPicker.setValue(d)),this.updateText()},updateCustomOption:function(){if(this.presetSelectPicker){var a=this.presetSelectPicker.$el,b=a&&this.presetSelectPicker.$el.find(".options"),c=b&&b.find(".custom");c&&c.html(this.createCustomMarkup())}},innerChangeHandler:function(b,c){b.$el.hasClass(a.presetSelectClass)?this.handlePluginPresetSelectChange(b,c):this.handleNonPluginPresetSelectChange(b,c),this.triggerChangeEvent(this.getValue())},registerToChangeEventAndDelegate:function(a,b){a.$el.on(a.pluginName+".change",function(c){c.stopPropagation(),b.innerChangeHandler(a,c)})},updateText:function(){var a=this.presetSelectPicker.getValue().value;this.$el.find(".box-like-drop-content").text(a)},getValue:function(){var a=this.fontPicker.getValue(),b={size:this.fontSizePicker.getValue(),style:this.textStylePicker.getValue(),family:a.value,cssFontFamily:a.cssFontFamily,preset:this.presetSelectPicker.getValue().value};return this.getParamKey()&&(b.fontStyleParam=!0),b},setValueFromPreset:function(a,b){this.setValueWithKnownPreset({size:parseInt(b.size,10),family:b.fontFamily,preset:a,style:{bold:"bold"===b.weight,italic:"italic"===b.style,underline:!1}})},setValueFromCustom:function(){this.validateValue(this.customVal)&&(this.fontSizePicker.setValue(this.customVal.size),this.textStylePicker.setValue(this.customVal.style),this.fontPicker.setValue(this.customVal.family),this.updateText())},validateValue:function(a){if(a&&"object"==typeof a){var b="number"==typeof a.size||a.size instanceof Number,c=a.style&&"object"==typeof a.style,d=a.family&&"string"==typeof a.family,e=a.preset&&"string"==typeof a.preset;if(b&&c&&d&&e)return!0}return!1},setValueWithKnownPreset:function(a){if(!this.validateValue(a))throw new Error("Unknown Preset "+JSON.stringify(a,null,4));this.fontSizePicker.setValue(a.size),this.textStylePicker.setValue(a.style),this.fontPicker.setValue(a.family),this.presetSelectPicker.setValue(a.preset),this.updateText()},setValue:function(a){"string"==typeof a&&(a={preset:a});var b=this.getTextPreset(a.preset);b?this.setValueFromPreset(a.preset,b):this.setValueWithKnownPreset(a)}}}),jQuery.fn.definePlugin("Input",function(a){"use strict";var b={inputClass:"uilib-input",validInputClass:"valid-input",invalidInputClass:"invalid-input",disabledClass:"disabled",largeClass:"large",mediumClass:"medium",xLargeClass:"x-large",bigClass:"big"};return{init:function(){this.markup(),this.setValue(this.options.value),this.bindEvents()},setValidationFunction:function(a){if("function"!=typeof a)throw new Error("You must provide a valid validation function.");this.options.validate=!0,this.options.validation=a},getDefaults:function(){return{value:"",validate:!1,required:!1,type:"text",placeholder:"Text input",disabled:!1,size:"default",validation:function(){return!0}}},markup:function(){switch(this.$input=a("<input>").attr("type",this.options.type).attr("placeholder",this.options.placeholder).addClass(b.inputClass),this.options.disabled&&this.disable(),this.options.size){case"large":this.$input.addClass(b.largeClass);break;case"medium":this.$input.addClass(b.mediumClass);break;case"x-large":this.$input.addClass(b.xLargeClass);break;case"big":this.$input.addClass(b.bigClass)}this.$el.append(this.$input)},bindEvents:function(){var a=this;a.$input.on("blur",function(){a.setValue(a.$input.val()),a.triggerChangeEvent(a.getValue())}),a.$input.on("keyup",function(){a.setValue(a.$input.val())})},getValue:function(){return this.value},setValue:function(a){var c=!this.options.required||!!a.length,d=this.$input.val()!==this.value||a!==this.value;c&&this.options.validation(a)&&d&&this.$input[0].checkValidity()?("number"==this.options.type&&!isNaN(parseFloat(a))&&isFinite(a)&&(a=Math.round(a)),this.lastValue=this.getValue(),a!==this.$input.val()&&this.$input.val(a),this.value=a,(this.options.validate||this.options.validation(a))&&this.$input.removeClass(b.invalidInputClass).addClass(b.validInputClass)):this.$input.val()!==this.value||"number"==this.options.type?(this.value="",this.options.validate&&""!==this.$input.val()||!this.$input[0].checkValidity()?this.$input.removeClass(b.validInputClass).addClass(b.invalidInputClass):this.$input.removeClass(b.invalidInputClass)):""===this.$input.val()&&this.$input[0].checkValidity()&&this.$input.removeClass(b.invalidInputClass)},disable:function(){this.$input.addClass(b.disabledClass),this.$input.attr("disabled","disabled")},enable:function(){this.$input.removeClass(b.disabledClass),this.$input.removeAttr("disabled","disabled")},isDisabled:function(){return this.$input.hasClass(b.disabledClass)}}}),jQuery.fn.definePlugin("LanguagePicker",function(){"use strict";function a(a){return $(a.map(function(a){return'<div value="'+a+'">'+c[a]+"</div>"}).join(""))}var b={className:"uilib-languagePicker"},c={En:"English",Da:"Dansk",De:"Deutsch",Es:"Español",Fr:"Français",It:"Italiano",Nl:"Nederlands",No:"Norsk",Pl:"Polski",Pt:"Português",Ru:"Русский",Sv:"Svenska",Ja:"日本語",Ko:"한국어",Tr:"Türkçe",He:"עברית"};return{init:function(){this.markup(),c[this.options.selectedLanguage]&&this.setValue(this.options.selectedLanguage),this.bindEvents()},markup:function(){var c=a(this.options.languages);this.$el.append(c);var d=this.options.height;if("auto"===this.options.height){var e=c.length%2;d=c.length<=4?26*c.length:(c.length-e)/2*26}this.dropdown=this.$el.Dropdown({width:62,height:d,optionsWidth:105,modifier:function(a){var b=$("<span class='globe'></span>");return a.text(a.attr("data-value")),a.prepend(b),a}}).data("plugin_Dropdown"),
this.$el.hasClass(b.className)||this.$el.addClass(b.className)},bindEvents:function(){var a=this;this.$el.on("Dropdown.change",function(b){b.stopPropagation(),a.triggerChangeEvent(a.getValue())})},getDefaults:function(){return{languages:["En","Da","De","Es","Fr","It","Nl","No","Pl","Pt","Ru","Sv","Ja","Ko","Tr","He"],height:"auto"}},getValue:function(){return this.dropdown.getFullValue()},setValue:function(a){return this.dropdown.setValue(a)}}}),jQuery.fn.definePlugin("Popup",function(a){"use strict";function b(a){a=a||"left";var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div");return b.className="popup-arrow popup-arrow-"+a,c.className="popup-arrow-one",d.className="popup-arrow-two",b.appendChild(c),b.appendChild(d),b}function c(a,b){var c="left",d="auto",e=15,g=0;a.style.top="0px",a.style.bottom="auto",a.style.left="0px",a.style.right="auto",a.style.margin="0";var h=a.clientWidth,i=a.clientHeight,j=i/2,k=b.clientWidth,l=b.clientHeight,m=l/2-j,n=k+e,o=f(b);k+h+o.left+e+1>window.innerWidth&&(d=k+e+1,c="right");var p=o.left-(h+e+1);return"right"===c&&0>p&&(m=0-(i+e),d=k/2-h/2,c="top"),o.top-j<0&&(m-=o.top-j-g),"top"!==c&&l+o.top+j>window.innerHeight&&(m-=l+o.top+j-window.innerHeight),a.style.top=m+"px",a.style.left="right"===c||"top"===c?"auto":n+"px",a.style.right="right"===c||"top"===c?d+"px":"auto",a.style.margin="",c}function d(a,b,c){var d="left",f="auto",g=15,h=window.innerWidth;a.style.top="0px",a.style.bottom="auto",a.style.left="0px",a.style.right="auto",a.style.margin="0";var i=c>0?c:a.clientWidth,j=a.clientHeight,k=j/2,l=b.clientWidth,m=b.clientHeight,n=e(b),o=n.top+m/2-k,p=n.left+l+g;n.left+l+g+i+1>h&&(f=h-n.left+g+1,d="right");var q=n.left-(i+g+1);return("right"===d&&0>q||j+o>window.innerHeight)&&(o=n.top-g-j,p=n.left+l/2-i/2,d="top"),0>o&&(o=n.top+(m+g)-4,d="bottom"),a.style.top=o+"px",a.style.left="right"===d?"auto":p+"px",a.style.right="right"===d?f+"px":"auto",a.style.margin="",d}function e(a){return{top:a.getBoundingClientRect().top,left:a.getBoundingClientRect().left}}function f(a){for(var b=0,c=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)a===document.body?(b+=a.offsetLeft-document.documentElement.scrollLeft,c+=a.offsetTop-document.documentElement.scrollTop):(b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop),a=a.offsetParent;return{top:c,left:b}}var g={okCancel:'<button class="uilib-btn btn-secondary btn-small x-close-popup">Cancel</button><button style="float:right" class="uilib-btn btn-small close-popup">OK</button>',none:""};return{init:function(){this.state="open",this.popup=this.$el[0],this.transclude(),this.markup(),this.close(),this.setContent(this.options.content),this.setFooter(this.options.footer),this.setTitle(this.options.title),this.setPosition(),this.bindEvents()},getDefaults:function(){return{appendTo:"body",title:"Popup",content:"",footer:"",modal:!1,modalBackground:"rgba(0,0,0,0.5)",height:"auto",width:300,buttonSet:"",fixed:!1,maxPopupWidth:0,onclose:function(){},oncancel:function(){},onopen:function(){},onposition:function(){}}},markup:function(){this.modal=document.createElement("div"),this.header=document.createElement("header"),this.headerTitle=document.createElement("span"),this.closeBtn=document.createElement("div"),this.content=document.createElement("div"),this.footer=document.createElement("div"),this.modal.className="popup-modal",this.closeBtn.className="popup-close-btn x-close-popup",this.popup.className="uilib-popup",this.header.className="popup-header",this.content.className="popup-content",this.footer.className="popup-footer",this.popup.appendChild(this.header),this.popup.appendChild(this.content),this.popup.appendChild(this.footer),this.header.appendChild(this.headerTitle),this.header.appendChild(this.closeBtn),this.arrow=this.createArrowElement()},transclude:function(){var b=this.$el;b.remove();var c=b.find(".popup-header").text(),d=b.find(".popup-content").html(),e=b.find(".popup-footer").html();a.trim(c)&&(this.options.title=c),a.trim(d)&&(this.options.content=d),a.trim(e)&&(this.options.footer=e),b.empty()},bindEvents:function(){function b(a){27===a.which&&c.isOpen()&&!c.options.modal&&d("cancel")}var c=this,d=function(a){c.setValue("close");var b=c.options["on"+a];"string"==typeof b&&"function"==typeof window[b]?window[b].call(c,{type:a}):"function"==typeof b&&b.call(c,{type:a})},e=function(b){var e=a(b.target).parents("."+c.popup.className)[0];e&&e===c.popup||!c.isOpen()||c.options.modal||(c.setValue("close"),d("cancel"))};a(window).on("keyup",b),a(this.popup).on("click",".close-popup",d.bind(null,"close")),a(this.popup).on("click",".x-close-popup",d.bind(null,"cancel")),a(window).on("click",e),this.whenDestroy(function(){a(window).off("click",e),a(window).off("keyup",b)})},getValue:function(){return this.isOpen()},setValue:function(a){"open"===a?this.open():this.close(),this.triggerChangeEvent("close")},setRelativeElement:function(b){this.relativeElement=a(b)[0]},setPosition:function(){return this.$el.css({position:this.options.fixed?"fixed":"absolute",width:this.options.width,height:this.options.height,left:"50%",top:"50%",marginLeft:0-this.options.width/2,marginTop:0-this.$el.height()/2}),this.relativeElement&&this.setBestPosition(this.relativeElement),"function"==typeof this.options.onposition?this.options.onposition.call(this):void 0},setBestPosition:function(a){a instanceof jQuery&&(a=a[0]);var b;return b=this.options.fixed?d(this.$el[0],a,this.options.maxPopupWidth):c(this.$el[0],a),this.setArrowDir(b),b},createArrowElement:function(){return b()},setArrowDir:function(a){return a=a||"left",this.arrow.className="popup-arrow popup-arrow-"+a},setContent:function(b){a(this.content).empty().append(b)},setFooter:function(b){a(this.footer).empty().append(g[this.options.buttonSet],b)},setTitle:function(b){a(this.headerTitle).text(b)},isOpen:function(){return"open"===this.state},toggle:function(){this.isOpen()?this.close():this.open()},open:function(){this.isOpen()||(this.closeAllPopups(),this.state="open",setTimeout(function(){return this.options.modal&&document.body.appendChild(this.modal),a(this.options.appendTo).append(this.popup),this.popup.style.display="block",this.modal.style.display="block",this.arrow.style.display="block",this.modal.style.backgroundColor=this.options.modalBackground,this.setPosition(),this.options.onopen?this.options.onopen.call(this):void 0}.bind(this),0))},close:function(){this.isOpen()&&(this.state="close",setTimeout(function(){this.modal.style.display="none",this.popup.style.display="none",this.arrow.style.display="none"}.bind(this),0))},closeAllPopups:function(){var b=a("."+this.popup.className);b.each(function(b,c){var d=a(c).getCtrl();d&&d.close()})}}}),jQuery.fn.definePlugin("Radio",function(a){"use strict";return{init:function(){this.options.value=void 0!==this.options.value?this.options.value:this.options.checked,this.markup(),this.setValue(this.options.value),this.bindEvents()},getDefaults:function(){return{radioBtnGroupClassName:"rb-radio-group",radioBtnClassName:"rb-radio",checkClassName:"rb-radio-check",checkedClassName:"rb-radio-checked",radioValueAttrName:"data-radio-value",inline:!1,checked:0,value:void 0}},markup:function(){this.$el.hasClass(this.options.radioBtnGroupClassName)||this.$el.addClass(this.options.radioBtnGroupClassName),this.radioGroup=this.$el.find("["+this.options.radioValueAttrName+"]").addClass("uilib-text").addClass(this.options.radioBtnClassName).addClass(this.options.inline?"uilib-inline":"").prepend('<span class="'+this.options.checkClassName+'"></span>')},bindEvents:function(){var b=this;this.$el.on("click","."+this.options.radioBtnClassName,function(){b.checkRadio(a(this))})},getValue:function(){var a=this.$el.find("."+this.options.checkedClassName);return{value:a.attr(this.options.radioValueAttrName),index:this.radioGroup.index(a)}},setValue:function(a){var b;"object"==typeof a&&(a=a.index),"string"==typeof a?b=this.$el.find("["+this.options.radioValueAttrName+'="'+a+'"]').eq(0):+a>=0&&(b=this.radioGroup.eq(+a)),b.length&&this.checkRadio(b,!0)},checkRadio:function(a,b){a.hasClass(this.options.checkedClassName)||(this.radioGroup.removeClass(this.options.checkedClassName),a.addClass(this.options.checkedClassName),b||this.triggerChangeEvent(this.getValue()))}}}),function(a,b,c,d){"use strict";function e(b,c){this.$el=a(b),this.options=a.extend({},g,c),this.percentScroll=0,this.lastScroll=d,this.markup(),this.registerEvents(),this.updateDisplay()}var f="Scrollbar",g={width:"auto",height:"250px",size:"8px",radius:"4px",color:"#a4d9fc",hoverColor:"#35aeff",hoverOpacity:1,position:"right",distance:"4px",opacity:1,railVisible:!0,railColor:"#333",railOpacity:0,railClass:"uilib-scrollRail",barClass:"uilib-scrollBar",wrapperClass:"uilib-scrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,minBarHeight:30,padding:"0 0 2px 0"};e.prototype.scrollContent=function(a,b,c){var d=a,e=this.$el.outerHeight()-this.$bar.outerHeight();if(b&&(d=parseInt(this.$bar.css("top"))+a*parseInt(this.options.wheelStep)/100*this.$bar.outerHeight(),d=Math.min(Math.max(d,0),e),d=a>0?Math.ceil(d):Math.floor(d),this.$bar.css({top:d+"px"})),this.percentScroll=parseInt(this.$bar.css("top"))/(this.$el.outerHeight()-this.$bar.outerHeight()),d=this.percentScroll*(this.$el[0].scrollHeight-this.$el.outerHeight()),c){d=a;var f=d/this.$el[0].scrollHeight*this.$el.outerHeight();f=Math.min(Math.max(f,0),e),this.$bar.css({top:f+"px"})}this.$el.scrollTop(d),this.$el.trigger("slimscrolling",~~d)},e.prototype.markup=function(){var b="<div></div>",c=a(b).addClass(this.options.wrapperClass).css({position:"relative",overflow:"hidden",width:this.options.width,height:this.options.height,padding:this.options.padding});this.$el.css({overflow:"hidden",width:this.options.width,height:this.options.height}),this.$rail=a(b).addClass(this.options.railClass).css({width:this.options.size,position:"absolute",height:"98%",top:0,display:"block","border-radius":this.options.radius,background:this.options.railColor,opacity:this.options.railOpacity,zIndex:999998});var d=this.$bar=a(b).addClass(this.options.barClass).css({background:this.options.color,width:this.options.size,position:"absolute",top:0,marginTop:"4px",opacity:this.options.opacity,display:"block","border-radius":this.options.radius,BorderRadius:this.options.radius,MozBorderRadius:this.options.radius,WebkitBorderRadius:this.options.radius,zIndex:999999,transition:"background-color 200ms "}),e=this;c.hover(function(){d.css({background:e.options.hoverColor,opacity:e.options.hoverOpacity})},function(){d.css({background:e.options.color,opacity:e.options.opacity})});var f="right"==this.options.position?{right:this.options.distance}:{left:this.options.distance};this.$rail.css(f),this.$bar.css(f),this.$el.wrap(c),this.$el.parent().append(this.$bar),this.$el.parent().append(this.$rail)},e.prototype.updateDisplay=function(){var a,b=Math.max(this.$el.outerHeight()/this.$el[0].scrollHeight*this.$el.outerHeight(),this.options.minBarHeight);b=isFinite(b)?b:parseInt(this.options.height,10),a=b>=this.$el.outerHeight()?"none":"block",this.$bar.css({height:b,display:a}),this.$rail.css({height:"98%",display:a})},e.prototype.registerEvents=function(){function d(a){clearTimeout(f),f=setTimeout(function(){g.$el.trigger("stopscrolling")},a)}function e(){return!1}var f,g=this,h=this.$bar,i=this.$rail;a(c.body).on("uilib-update-scroll-bars",function(){g.updateDisplay()}),this.$el.mousewheel(function(a,b){if("none"!==h.css("display")){a.preventDefault();var c=10,e=h.position().top,f=e-b*c,j=i.height(),k=h.height();f=Math.min(f,j-k),f=Math.max(0,f),h.css({top:f}),g.scrollContent(0,h.position().top,!1),d(200)}}),this.$rail.on("click",function(a){var b,c=i.height(),e=h.height(),f=h.position().top;b=f>a.offsetY?Math.max(0,a.offsetY):Math.min(a.offsetY-e,c-e),h.css({top:b}),g.scrollContent(0,h.position().top,!1),d(200)}),this.$bar.on("mousedown",function(f){function j(a){var b=a.clientY-l+m,c=Math.min(b,n-o);c=Math.max(0,c),h.css({top:c}),g.scrollContent(0,h.position().top,!1)}function k(){a(b).off("mousemove",j),a(b).off("mouseup",k),a(c).off("selectstart",e),d(200)}c.body.focus(),a(c).on("selectstart",e);var l=f.clientY,m=h.position().top,n=i.height(),o=h.height();a(b).on("mousemove",j),a(b).on("mouseup",k)}),this.$el.bind("touchstart",function(a){a.originalEvent.touches.length&&(this._touchDif=a.originalEvent.touches[0].pageY)}),this.$el.bind("touchmove",function(a){if(a.originalEvent.preventDefault(),a.originalEvent.touches.length){var b=(this._touchDif-a.originalEvent.touches[0].pageY)/this.options.touchScrollStep;this.scrollContent(b,!0)}})},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var e,f=b||window.event,g=[].slice.call(arguments,1),h=0,i=0,j=0,k=0,l=0;return b=a.event.fix(f),b.type="mousewheel",f.wheelDelta&&(h=f.wheelDelta),f.detail&&(h=-1*f.detail),f.deltaY&&(j=-1*f.deltaY,h=j),f.deltaX&&(i=f.deltaX,h=-1*i),void 0!==f.wheelDeltaY&&(j=f.wheelDeltaY),void 0!==f.wheelDeltaX&&(i=-1*f.wheelDeltaX),k=Math.abs(h),(!c||c>k)&&(c=k),l=Math.max(Math.abs(j),Math.abs(i)),(!d||d>l)&&(d=l),e=h>0?"floor":"ceil",h=Math[e](h/c),i=Math[e](i/d),j=Math[e](j/d),g.unshift(b,h,i,j),(a.event.dispatch||a.event.handle).apply(this,g)}var c,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],f="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(a.event.fixHooks)for(var g=e.length;g;)a.event.fixHooks[e[--g]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=f.length;a;)this.addEventListener(f[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=f.length;a;)this.removeEventListener(f[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),jQuery.fn.definePlugin("Slider",function(a){"use strict";function b(){return'<div class="uilib-slider-tooltip uilib-slider-tooltip-wrapper"><div class="picker-arrow-top"><div class="picker-arrow-one"></div><div class="picker-arrow-two"></div></div><div class="uilib-text"></div></div>'}var c={sliderClass:"uilib-slider",pinClass:"uilib-slider-pin",disabledClass:"disabled",textClass:"uilib-text"};return{init:function(){this.markup(),this.bindEvents(),this.options.create.call(this),this.setValue(this.options.value)},getDefaults:function(){return{minValue:0,maxValue:100,value:0,width:80,preLabel:"",postLabel:"",className:"default-uilib-slider-ui",toolTip:!1,supportClick:!0,slide:function(){},create:function(){}}},markup:function(){var d=(this.$el.css("left"),{width:this.options.width});this.$el.hasClass(c.sliderClass)||this.$el.addClass(c.sliderClass),this.options.preLabel&&(this.$el.prepend('<span class="uilib-text uilib-slider-preLabel">'+this.options.preLabel+"</span>"),d.left=14),this.$pin=a("<div>"),this.$el.append(this.$pin),this.options.postLabel&&this.$el.append('<span class="uilib-text uilib-slider-postLabel">'+this.options.postLabel+"</span>"),this.$el.addClass(c.sliderClass).css(d).addClass(this.options.className),this.$pin.addClass(c.pinClass),this.$pin.width(19),this.options.toolTip&&(this.$toolTip=a(b()),this.$pin.append(this.$toolTip.hide()))},getXFromEvent:function(a){var b=void 0!==a.offsetX?a.offsetX:a.clientX-a.target.getBoundingClientRect().left;return b/this.$el.width()},bindEvents:function(){var b=a(window),c=this;c.options.supportClick&&this.$el.on("click",function(a){if(a.target===c.$el[0]){var b=c.getXFromEvent(a);c.setValue(c.transform(b)),c.triggerChangeEvent(c.getValue())}}),this.$pin.on("mousedown",function(a){function d(a){c.setPosition(a)}function e(){c.$toolTip&&c.$toolTip.hide(),c.enableTextSelection(),b.off("mousemove",d),b.off("mouseup",e),c.triggerChangeEvent(c.getValue())}c.$toolTip&&!c.$toolTip.is(":visible")&&c.$toolTip.show(),c.currentPos=c.$pin.position().left,c.startDragPos=a.pageX,c.disableTextSelection(a),b.on("mousemove",d),b.on("mouseup",e)})},getValue:function(){return this.transform(this.options.value)},setValue:function(a){var b;return this.options.value=this.valueInRangeToInnerRange(a),this.options.value!==this.last_value&&(this.last_value=this.options.value,b=this.getValue(),this.$el.trigger("slide",b),this.options.toolTip&&this.$toolTip.find("."+c.textClass).text(Math.round(b)),this.options.slide.call(this,b)),this.update()},transform:function(a){return this.options.minValue+a*(this.options.maxValue-this.options.minValue)},valueInRangeToInnerRange:function(a){return a=a<this.options.minValue?this.options.minValue:a,a=a>this.options.maxValue?this.options.maxValue:a,(a-this.options.minValue)/(this.options.maxValue-this.options.minValue)},disableTextSelection:function(){document.body.focus(),document.onselectstart=function(){return!1}},enableTextSelection:function(){document.onselectstart=null},setPosition:function(a){if(!this.isDisabled()){var b=a.pageX-this.startDragPos,c=this.currentPos+b,d=this.$el.width()-this.$pin.width();0>c&&(c=0),c>d&&(c=d),this.options.value=this.transform(c/d),this.setValue(this.options.value),this.startDragPos=a.pageX,this.currentPos=c}},update:function(){return this.$pin.css({left:this.options.value*(this.$el.width()-this.$pin.width())}),this},disable:function(){this.$el.addClass(c.disabledClass)},enable:function(){this.$el.removeClass(c.disabledClass)},isDisabled:function(){return this.$el.hasClass(c.disabledClass)}}}),jQuery.fn.definePlugin("Spinner",function(){"use strict";function a(){return"<div class="+c.upArrow+"></div><div class="+c.downArrow+"></span>"}function b(a){return"string"==typeof a&&""!==a&&(a=parseFloat(a)),""===a||isNaN(a)?null:a}var c={className:"uilib-spinner",defaultSize:"default",mediumSize:"medium",largeSize:"large",upArrow:"up-arrow",downArrow:"down-arrow"},d={mouseDown:"mousedown",mouseUp:"mouseup",mouseLeave:"mouseleave",focusOut:"focusout",keypress:"keypress"};return{init:function(){this.markup(),this.bindEvents(),this.setValue(this.options.value)},getDefaults:function(){return{minValue:0,maxValue:1e3,value:0,step:1,precision:0}},markup:function(){switch(this.$el.append("<input autocomplete='off'>").append(a()),this.$el.hasClass(c.className)||this.$el.addClass(c.className),this.options.size){case c.mediumSize:this.$el.addClass(c.mediumSize);break;case c.largeSize:this.$el.addClass(c.largeSize);break;default:this.$el.addClass(c.defaultSize)}},bindEvents:function(){var a,e=this,f=0,g=function(){clearTimeout(a),a=setTimeout(function(){e.setValue(b(e.getValue())+e.options.step*f),g()},100)};this.$el.on(d.mouseUp+" "+d.mouseLeave,function(b){clearTimeout(a),f=0,"mouseleave"!==b.type&&e.triggerChangeEvent(e.getValue())}),this.$el.on(d.mouseDown,"."+c.upArrow,function(){e.setValue(b(e.getValue())+e.options.step),e.triggerChangeEvent(e.getValue()),f=1,clearTimeout(a),a=setTimeout(g,500)}),this.$el.on(d.mouseDown,"."+c.downArrow,function(){e.setValue(b(e.getValue())-e.options.step),e.triggerChangeEvent(e.getValue()),f=-1,clearTimeout(a),a=setTimeout(g,500)}),this.$el.on(d.focusOut,"input",function(){e.setValue(b(e.getValue()))&&e.triggerChangeEvent(e.getValue())}),this.$el.on(d.keypress,"input",function(a){13==a.which&&e.setValue(b(e.getValue()))&&e.triggerChangeEvent(e.getValue())})},getValue:function(){return+this.$el.find("input").val()},setValue:function(a){return this.options.value=this.valueInRangeToInnerRange(a),a!==this.last_value&&this.update(),this.options.value!==this.last_value?(this.last_value=this.options.value,!0):void 0},update:function(){return this.$el.find("input").val(this.options.value),this},valueInRangeToInnerRange:function(a){return a=+(+a).toFixed(this.options.precision),a=a<this.options.minValue?this.options.minValue:a,a=a>this.options.maxValue?this.options.maxValue:a}}}),jQuery.fn.definePlugin("Tabs",function(a){"use strict";var b={className:"uilib-tabs",tabPane:".tab-pane"};return{init:function(){this.markup(),this.bindEvents(),this.selectTab(a(this.tabs[this.options.value]))},getDefaults:function(){return{tabValueAttrName:"data-tab",tabClassName:"ui-lib-tab",selectedClassName:"selected",value:0}},markup:function(){this.$el.hasClass(b.className)||this.$el.addClass(b.className),this.tabs=this.$el.find("li["+this.options.tabValueAttrName+"]").addClass(this.options.tabClassName),this.tabsContent=this.$el.find(".tab-content > div["+this.options.tabValueAttrName+"]"),0===this.$el.find("div[wix-scroll]").length&&this.$el.find(b.tabPane).addClass("border")},bindEvents:function(){var b=this;this.$el.on("click","."+this.options.tabClassName,function(){b.selectTab(a(this))})},getValue:function(){},setValue:function(){},selectTab:function(b){var c=this;if(!b.hasClass(c.options.selectedClassName)){c.tabsContent.hide(),c.tabs.removeClass(c.options.selectedClassName);var d=b.attr(c.options.tabValueAttrName);b.addClass(c.options.selectedClassName),a.each(c.tabsContent,function(b,e){var f=a(e);f.attr(c.options.tabValueAttrName)===d&&f.show()}),this.triggerChangeEvent(this.getValue()),a(document.body).trigger("uilib-update-scroll-bars")}}}}),jQuery.fn.definePlugin("Tooltip",function(a){"use strict";var b={className:"uilib-tooltip",textClassName:"uilib-text",arrowClassName:"arrow_box",arrowHeight:12},c={mouseEnter:"mouseenter",mouseLeave:"mouseleave"},d=["top","right","left","bottom"];return{init:function(){this.markup(),this.bindEvents()},getDefaults:function(){return{placement:d[0],text:"",html:!1,template:"<div class="+b.className+"><div class="+b.arrowClassName+"><div class="+b.textClassName+"></div></div></div>",animation:!0}},markup:function(){},bindEvents:function(){function e(a){a.find("."+b.arrowClassName).addClass("down"),a.css("left",l.position().left+i(a)),a.css("top",l.position().top-(a.outerHeight()+b.arrowHeight))}function f(a){a.find("."+b.arrowClassName).addClass("up"),a.css("left",l.position().left+i(a)),a.css("top",l.position().top+l.outerHeight()+b.arrowHeight)}function g(a){a.find("."+b.arrowClassName).addClass("left"),a.css("left",l.position().left+l.outerWidth()+b.arrowHeight),a.css("top",l.position().top+j(a))}function h(a){a.find("."+b.arrowClassName).addClass("right"),a.css("left",l.position().left-(a.outerWidth()+b.arrowHeight)),a.css("top",l.position().top+j(a))}function i(a){if(l.outerWidth()>a.outerWidth()){var b=l.outerWidth()-a.outerWidth();return b/2}var b=a.outerWidth()-l.outerWidth();return-b/2}function j(a){if(l.outerHeight()>a.outerHeight()){var b=l.outerHeight()-a.outerHeight();return b/2}var b=a.outerHeight()-l.outerHeight();return-b/2}var k=this,l=k.$el;l.on(c.mouseEnter,function(){k.remove();var b=a(k.options.template);if(k.setText(l,b),l.after(b),a.inArray(k.options.placement,d)>-1)switch(k.options.placement){case"top":e(b);break;case"right":g(b);break;case"left":h(b);break;case"bottom":f(b);break;default:e(b)}else e(b)}),l.on(c.mouseLeave,function(){k.options.animation?a("."+b.className).fadeOut(function(){k.remove()}):k.remove()})},getValue:function(){return""},setValue:function(){},update:function(){return this},remove:function(){a("."+b.className).remove()},setText:function(a,c){var d=c.find("."+b.textClassName),e=this.options.text||a.attr("wix-tooltip");this.options.html?d.html(e):d.text(e)}}}),jQuery.fn.definePlugin("Upgrade",function(){"use strict";return{init:function(){this.markup(),this.bindEvents()},getDefaults:function(){return{class:"btn-upgrade",vendorProductId:"",cycle:"MONTHLY"}},markup:function(){var a="submit uilib-btn "+this.options.class;this.$el.append('<button class="'+a+'">'+this.options.text+"</button>")},bindEvents:function(){this.$el.find(".uilib-btn").on("click",this.upgrade.bind(this))},getValue:function(){},setValue:function(){},upgrade:function(){var a=this.options.vendorProductId;Wix.Billing.openBillingPageForProduct(a,this.options.cycle,function(){var b=Wix.UI.create({ctrl:"Popup",options:{buttonSet:"okCancel",fixed:!0,title:"Ooops something when wrong...",content:a+" was not found."}});b.getCtrl().open()})}}}),angular.module("wix.common.bi",[]).factory("Logger",function(){return W.BI.Logger}).factory("DomEventHandler",function(){return W.BI.DomEventHandler});var W=W||{};W.BI=W.BI||{},W.BI.ErrorSeverity={RECOVERABLE:10,WARNING:20,ERROR:30,FATAL:40},W.BI.Categories={EDITOR:1,VIEWER:2,TIMEOUTS:3,SERVER:4},W.BI.initialLoadIsReported=!1,W.BI.Logger=function(){function a(){return(new Date).getTime()}function b(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}function c(a){function c(a,c){var d={src:{type:"number"},evid:{type:"number"}},f=b({},e,n.defaultEventArgs,a),g=n.schemaValidators||[],h=!(g.length>0)||g.some(function(a){return a.match(f)&&(a.execute(f)||!0)});if(!h)throw new Error("No validator accepted the event");k(f,["evid"],d)&&m(f,c)}function d(a,c){var d=["evid","cat","iss","sev","errc","ver"],e={src:{type:"number"},evid:{type:"number",values:[h.ERROR]},cat:{type:"number",values:[W.BI.Categories.EDITOR,W.BI.Categories.VIEWER,W.BI.Categories.TIMEOUTS,W.BI.Categories.SERVER]},iss:{type:"number"},sev:{type:"number",values:[W.BI.ErrorSeverity.RECOVERABLE,W.BI.ErrorSeverity.WARNING,W.BI.ErrorSeverity.ERROR,W.BI.ErrorSeverity.FATAL]},errc:{type:"number"},httpc:{type:"number"},ver:{type:"string",maxLength:16},errscp:{type:"string",subStr:64},trgt:{type:"string",subStr:64},gsi:{type:"string",length:36},ts:{type:"number"},uid:{type:"number"},ut:{type:"string",maxLength:16},did:{type:"string",maxLength:36},cid:{type:"string",length:36},lng:{type:"string",maxLength:5},dsc:{type:"string",subStr:512}},g=b({},f,n.defaultErrorArgs,a,{evid:h.ERROR});k(g,d,e)&&m(g,c)}function i(a,d,e){var f={view:{type:"string"}},g=b({},d,{evid:h.ON_READY,view:a});k(g,["view"],f)&&c(g,e)}function j(a,d,e){var f={view:{type:"string"}},g=b({},d,{evid:h.ROUTE_CHANGE,view:a});k(g,["view"],f)&&c(g,e)}function k(a,b,c){var d=b.slice(0);for(var e in a){var f=c[e]||{};if(a[e]=p.parse(a[e],f),!p.valid(a[e],f))return void n.error("Bad event param (key: "+e+", value: "+a[e]+")");var g;(g=d.indexOf(e))>-1&&d.splice(g,1)}return!(d.length>0)||(n.error("Missing required params: "+d.join(", ")),!1)}function l(a,b){var c=a.match(/\?./)?"&":"?";return a.replace(/\?$/,"")+c+Object.keys(b).filter(function(a){return!n.removeUndefinedValues||void 0!==b[a]}).map(function(a){return[encodeURIComponent(a),"=",encodeURIComponent(b[a])].join("")}).join("&")}function m(a,b){var c=a.adapter||n.adapter;delete a.adapter;var d=l(n.biUrl+c,a),e=b||function(){};if(W.BI.DryRun)setTimeout(e,0);else{var f=new Image(0,0);f.onload=e,f.onerror=e,f.src=d}o.url=d,o.callback=b}var n,o={url:void 0,assertEmpty:function(){if(void 0!==this.url)throw"last bi is not empty!!!"},resolve:function(){this.callback()},clear:function(){this.url=void 0}},p=new W.BI.FieldParsers(a.injector);return a.hostName&&(a.biUrl="//"+a.hostName+"/"),n=b({},g,a),{log:c,reportOnReady:i,reportRouteChange:j,error:d,getLastBiUrl:function(){return o}}}var d=a(),e={_:a},f={_:a,ts:function(){return a()-d},cat:W.BI.Categories.VIEWER,sev:W.BI.ErrorSeverity.WARNING,iss:1,ver:"1"},g={hostName:"frog.wix.com",defaultEventArgs:{},defaultErrorArgs:{},biUrl:"//frog.wix.com/",schemaValidators:[],adapter:"",error:function(a){throw a}},h={ERROR:10,ON_READY:302,ROUTE_CHANGE:300};return c}();var W=W||{};W.BI=W.BI||{},W.BI.DomEventHandler=function(){function _extend(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];if(c)for(var d in c)a[d]=c[d]}return a}function eventHandler(biLogger,args){function _safeGetEventParams(a,b,c){var d;return b&&b[a]?d=b[a]:(_options.error("Invalid event name"),d={}),_extend({},d,c)}function _log(a,b,c){var d=_safeGetEventParams(a,_options.eventMap,b);_biLogger.log(d,c)}function _error(a,b,c){var d=_safeGetEventParams(a,_options.errorMap,b);_biLogger.error(d,c)}function _getAttr(a,b){for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name===b)return a.attributes[c].value}function _handleTriggeredBiEvent(event){var eventName=_getAttr(event.target,_wixBiAttributeSelector);if(eventName){var eventArgsStr=_getAttr(event.target,_wixBiArgsAttribute),eventArgs=eventArgsStr?eval("eventArgs = "+eventArgsStr):{};_log(eventName,eventArgs)}}function _bind(){document.body.addEventListener("click",_handleTriggeredBiEvent)}function _unbind(){document.body.removeEventListener("click",_handleTriggeredBiEvent)}var _options,_biLogger=biLogger;return _options=_extend({},_initOptions,args),{bind:_bind,unbind:_unbind,log:_log,error:_error}}var _wixBiAttributeSelector="wix-bi",_wixBiArgsAttribute="wix-bi-args",_initOptions={eventMap:{},errorMap:{},error:function(a){throw a}};return eventHandler}();var W=W||{};W.BI=W.BI||{},W.BI.FieldParsers=function(a){var b={length:function(a,b){return a&&void 0!==a.length&&a.length===b},maxLength:function(a,b){return a&&void 0!==a.length&&a.length<=b},values:function(a,b){return b&&b.indexOf(a)!==-1},type:function(a,b){return a&&typeof a===b}},c={subStr:function(a,b){return a&&a.substr?a.substr(0,Math.min(a.length,b)):a}};this.valid=function(a,c){for(var d in c)if(b[d]&&!b[d](a,c[d]))return!1;return!0},this.parse=function(b,d){"function"==typeof b&&(b=a?a.invoke(b):b());for(var e in d)b=c[e]?c[e](b,d[e]):b;return b}},angular.module("wix.common.bi").directive("wixBi",["domBiLogger","$window",function(a,b){function c(a){return a.replace(/-/g,"_").toUpperCase()}return{restrict:"A",priority:1,link:{pre:function(d,e,f){var g=f.wixBiEvent||"click";e.bind(g,function(e){var h=c(f.wixBi),i=d.$eval(f.wixBiArgs)||{};if("click"===g&&e.target.href&&void 0!==f.delayHref){var j=e.target.href;e.preventDefault(),a.log(h,i,function(){b.location=j})}else a.log(h,i)})}}}}]),angular.module("wix.common.bi").provider("biLogger",["recursiveExtend",function(a){var b={eventMap:{}};this.setConfig=function(c){a(b,c)},this.$get=["Logger","$injector",function(a,c){function d(){var a={};return a.ownerId=function(a){return a.$$getOwnerId()},a.ownerId.$inject=["permissionsManager"],a.roles=function(a){return a.$$getRoles().join(",")},a.roles.$inject=["permissionsManager"],a}if(b.injector=c,c.has("permissionsManager")){var e=d();b.defaultEventArgs=angular.extend({},b.defaultEventArgs,e),b.defaultErrorArgs=angular.extend({},b.defaultErrorArgs,e)}return angular.extend(new a(b),{getConfig:function(){return b}})}],this.$get.$inject=["Logger","$injector"]}]),angular.module("wix.common.bi").provider("domBiLogger",["recursiveExtend",function(a){var b={eventMap:{}};this.setConfig=function(c){a(b,c)},this.$get=["biLogger","DomEventHandler",function(a,c){return angular.extend(new c(a,b),{getConfig:function(){return b}})}],this.$get.$inject=["biLogger","DomEventHandler"]}]),angular.module("wix.common.bi").constant("recursiveExtend",function(){function a(a){return null!==a&&"object"==typeof a&&a.constructor!==Array}function b(c,d){for(var e in d)d.hasOwnProperty(e)&&(a(d[e])?(c[e]=c[e]||{},b(c[e],d[e])):c[e]=d[e])}return b}()),angular.module("wix.common.bi").value("nowWrapper",function(){return Date.now()}).provider("wixBiLogger",["biLoggerProvider","domBiLoggerProvider",function(a,b){this.setConfig=function(c){a.setConfig(c),b.setConfig(c)},this.$get=["biLogger","domBiLogger","$q","$rootScope","$window","$parse","nowWrapper",function(a,b,c,d,e,f,g){function h(a){return function(){d.$$phase?a.resolve():d.$apply(function(){a.resolve()})}}function i(a){return Object.keys(k[a]||[]).reduce(function(a,b){return a[b]=b,a},{})}function j(){return"undefined"!=typeof e.NREUM}var k=angular.extend({},a.getConfig(),b.getConfig());return{log:function(d,e){var f=c.defer();return"string"!=typeof d&&d?a.log(d,h(f)):b.log(d,e,h(f)),f.promise},error:function(d,e){var f=c.defer();return"string"==typeof d?b.error(d,e,h(f)):a.error(d,h(f)),f.promise},reportOnReady:function(b,d){
var i=c.defer();if(!W.BI.initialLoadIsReported){j()&&e.NREUM.finished(),void 0===d&&(d={});var k=f("performance.timing.navigationStart")(e);k&&(d.loading_time=g()-k),d.initial_load=!0,W.BI.initialLoadIsReported=!0}return a.reportOnReady(b,d,h(i)),i.promise},reportRouteChange:function(b,d){var e=c.defer();return a.reportRouteChange(b,d,h(e)),e.promise},getLastBiUrl:function(){return a.getLastBiUrl()},events:i("eventMap"),errors:i("errorMap"),getConfig:function(){return angular.extend({},a.getConfig(),b.getConfig())}}}],this.$get.$inject=["biLogger","domBiLogger","$q","$rootScope","$window","$parse","nowWrapper"]}]);